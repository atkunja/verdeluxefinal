import{r as f,j as e,u as k,k as S}from"./index-D68JyPnQ.js";import{u as E}from"./BookingWizardProvider-CZ44CSfS.js";import{W as F,S as W}from"./SummaryPanel-D7zU54v8.js";import{b as N}from"./analytics-Cg1IkZOG.js";import{h as B,b as D}from"./styles-CoJu3Vce.js";import{T as V}from"./triangle-alert-DYKA_FWn.js";const y=["Canton","Dearborn","Dearborn Heights","Farmington","Farmington Hills","Garden City","Livonia","Northville","Northville Township","Novi","Plymouth Township","Romulus","Southfield","Van Buren Township","Wayne","Westland","Ypsilanti","Ypsilanti Township"],I=["123 Main Street, Canton, MI, USA","456 Ford Road, Dearborn, MI, USA","789 Telegraph Road, Dearborn Heights, MI, USA","101 Grand River Ave, Farmington, MI, USA","202 Orchard Lake Road, Farmington Hills, MI, USA","303 Middlebelt Road, Garden City, MI, USA","404 Plymouth Road, Livonia, MI, USA","505 Center Street, Northville, MI, USA","606 Beck Road, Northville Township, MI, USA","707 Novi Road, Novi, MI, USA","808 Ann Arbor Road, Plymouth Township, MI, USA","909 Wayne Road, Romulus, MI, USA","1010 Northwestern Hwy, Southfield, MI, USA","1111 Belleville Road, Van Buren Township, MI, USA","1212 Michigan Ave, Wayne, MI, USA","1313 Ford Road, Westland, MI, USA","1414 Washtenaw Ave, Ypsilanti, MI, USA","1515 Whittaker Road, Ypsilanti Township, MI, USA"];function z({value:a,onChange:s,onSelect:d,onPlaceSelect:i,placeholder:h="Start typing your address...",enablePlaces:n}){const[l,c]=f.useState(!1),[m,p]=f.useState(!1),u=f.useRef(null),t="AIzaSyBVO31vNHgF1Jtr9lxMa1tGF_Tosb0ZhaE";f.useEffect(()=>{if(!n)return;if(window.google?.maps?.places){p(!0);return}const r=document.getElementById("google-places-script");if(r){r.addEventListener("load",()=>p(!0));return}const o=document.createElement("script");o.id="google-places-script",o.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places`,o.async=!0,o.onload=()=>p(!0),document.body.appendChild(o)},[n,t]),f.useEffect(()=>{if(!m||!n||!u.current||!window.google?.maps?.places)return;const r=new window.google.maps.places.Autocomplete(u.current,{fields:["formatted_address","place_id","geometry","address_components"],componentRestrictions:{country:["us"]}});return r.addListener("place_changed",()=>{const o=r.getPlace(),x=o?.formatted_address||u.current?.value||"",M=o?.geometry?.location?.lat?.(),j=o?.geometry?.location?.lng?.(),A=o?.address_components??[],g=w=>A.find(v=>v.types?.includes(w))?.long_name,C=w=>A.find(v=>v.types?.includes(w))?.short_name,R=g("locality")||g("postal_town")||g("sublocality_level_1"),_=C("administrative_area_level_1"),U=g("postal_code"),T=g("street_number"),L=g("route");s(x),d?.(x),i?.({address:x,placeId:o?.place_id,lat:M,lng:j,city:R,state:_,postalCode:U,streetNumber:T,route:L}),c(!1)}),()=>{window.google?.maps?.event&&window.google.maps.event.clearInstanceListeners(r)}},[m,n,s,d,i]);const b=f.useMemo(()=>n&&m?[]:!a||a.length<1?I:I.filter(r=>r.toLowerCase().includes(a.toLowerCase())),[a,n,m]);return e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{htmlFor:"address-input",className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{id:"address-input",type:"text",ref:u,value:a,onChange:r=>{s(r.target.value),c(!0)},onFocus:()=>c(!0),onBlur:()=>{setTimeout(()=>c(!1),200)},placeholder:h,className:"mt-1 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-[#163022] focus:outline-none focus:ring-2 focus:ring-[#163022]",autoComplete:"off"}),l&&b.length>0&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full max-h-64 overflow-y-auto rounded-xl border border-gray-200 bg-white shadow-lg",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 border-b border-gray-100",children:"Select a service area address"}),b.map(r=>e.jsxs("button",{type:"button",onMouseDown:o=>o.preventDefault(),onClick:()=>{s(r),d?.(r);const o=y.find(x=>r.toLowerCase().includes(x.toLowerCase()));i?.({address:r,city:o}),c(!1)},className:"flex w-full items-center gap-2 px-3 py-2 text-left text-sm hover:bg-gray-50",children:[e.jsx("span",{className:"text-lg text-gray-500",children:"ðŸ“"}),e.jsx("span",{className:"text-gray-800",children:r})]},r))]}),l&&a&&b.length===0&&e.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-xl border border-dashed border-gray-200 bg-white px-3 py-2 text-sm text-gray-500",children:"No matching addresses. Try entering a number and street in one of our service cities."})]})}function H(a,s){if(s)return y.some(i=>i.toLowerCase()===s.toLowerCase());const d=a.toLowerCase();return y.some(i=>d.includes(i.toLowerCase()))}function P(){const a=k(),{draft:s,updateDraft:d}=E(),[i,h]=S.useState(!!s.address.formatted),n=!0;S.useEffect(()=>{N.stepViewed("get-started")},[]);const l=s.address.formatted||"",c=s.address.city,m=l.length>=5?H(l,c):!0,p=i||!n&&l.length>=5,u=p&&m;return e.jsxs(F,{step:0,summary:e.jsx(W,{draft:s}),children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Welcome!"}),e.jsx("p",{className:`${B} mt-2`,children:"Please enter your address below."})]}),e.jsx(z,{value:s.address.formatted||"",onChange:t=>{d({address:{...s.address,formatted:t,city:void 0}}),h(!1)},onSelect:t=>{d({address:{...s.address,formatted:t}}),h(!0)},onPlaceSelect:t=>{d({address:{...s.address,formatted:t.address,placeId:t.placeId,lat:t.lat,lng:t.lng,street:t.streetNumber&&t.route?`${t.streetNumber} ${t.route}`:t.route||t.streetNumber,city:t.city,state:t.state,zip:t.postalCode}}),h(!0)},enablePlaces:n}),l.length>=5&&!m&&e.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800",children:[e.jsx(V,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"We don't currently service this area"}),e.jsxs("p",{className:"text-sm mt-1",children:["We currently provide cleaning services in: ",y.slice(0,5).join(", "),"... and more cities in the Metro Detroit area."]})]})]}),!p&&s.address.formatted&&n&&e.jsx("p",{className:"text-sm text-red-600",children:"Please pick an address from suggestions."}),e.jsx("button",{type:"button",className:`${D} mt-6 w-full md:w-auto`,onClick:()=>{u&&(N.selectionMade("address",s.address.formatted),a({to:"/booking-quiz/clean/type"}))},disabled:!u,children:"Get Started â†’"})]})}const Z=function(){return e.jsx(P,{})};export{Z as component};
