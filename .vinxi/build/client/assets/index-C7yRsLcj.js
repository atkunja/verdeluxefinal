import{u,J as b,a as j,b as N,r as y,z as d,g as f,j as e,U as o,P as w}from"./index-D68JyPnQ.js";import{P as v,B as k,a as n,D as m}from"./PortalLayout-DFkXF_dG.js";import{A as C,a as B}from"./AdminCalendarView-KYVGVky4.js";import{L as P}from"./loader-DMU7MElH.js";import{C as c}from"./circle-x-YOFRGHgJ.js";import{a as A}from"./Footer-CWCGcQgO.js";import{C as x}from"./calendar-sVqVbs5g.js";import{C as E}from"./circle-check-big-DhNyGKn9.js";import"./formatTime-R4Jm2Dpf.js";import"./plus-BeADQoDx.js";import"./clock-04BLIM7u.js";import"./square-check-big-DlVo-rQ2.js";import"./map-pin-BUW29wY0.js";const $=function(){const t=u(),{userId:i}=b.useParams(),g=j(),{token:a,user:r}=N();y.useEffect(()=>{if(!a||!r){d.error("Please log in to access the admin portal"),t({to:"/login"});return}r.role!=="ADMIN"&&r.role!=="OWNER"&&(d.error("Access denied. Admin privileges required."),t({to:"/"}))},[a,r,t]);const s=f({...g.getCustomerDetailsAdmin.queryOptions({authToken:a||"",customerId:parseInt(i)}),enabled:!!a&&!!i});if(!a||!r)return null;const h=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),p=l=>{switch(l){case"CLIENT":return e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Client"});case"CLEANER":return e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:"Cleaner"});case"ADMIN":return e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 border border-purple-200",children:"Admin"});case"OWNER":return e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 border border-red-200",children:"Owner"});default:return e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 border border-gray-200",children:l})}};return e.jsx(v,{portalType:"admin",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-50 via-white to-gray-50 min-h-screen",children:s.isLoading?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(P,{className:"w-12 h-12 text-primary animate-spin"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading customer details..."})]})})}):s.isError?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-red-50 rounded-xl shadow-sm border border-red-200 p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(c,{className:"w-12 h-12 text-red-600"}),e.jsx("p",{className:"text-red-900 font-semibold",children:"Error loading customer details"}),e.jsx("button",{onClick:()=>t({to:"/admin-portal",search:{view:"management-customers"}}),className:"mt-4 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Back to Customers"})]})})}):s.data?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>t({to:"/admin-portal",search:{view:"management-customers"}}),className:"flex items-center gap-2 text-white hover:text-green-100 transition-colors mb-4",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Back to Customers"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:e.jsx(o,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold font-heading",children:[s.data.customer.firstName," ",s.data.customer.lastName]}),e.jsx("p",{className:"mt-2 text-green-100 text-base",children:s.data.customer.email})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 text-primary"}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.data.customer.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.data.customer.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),e.jsx("div",{className:"mt-1",children:p(s.data.customer.role)})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Member Since"}),e.jsx("p",{className:"font-medium text-gray-900",children:h(s.data.customer.createdAt)})]})]})]}),s.data.customer.temporaryPassword&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 text-yellow-600 mt-0.5",children:"ðŸ”‘"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Temporary Password (Admin View Only)"}),e.jsx("p",{className:"font-mono text-lg font-bold text-yellow-900 bg-yellow-100 px-3 py-2 rounded border border-yellow-300 inline-block",children:s.data.customer.temporaryPassword}),e.jsx("p",{className:"text-xs text-yellow-700 mt-2",children:s.data.customer.hasResetPassword?"This temporary password can still be used if the customer forgets their current password. They can use it via 'Forgot Password' on the login page.":"This password was auto-generated when the account was created. The customer can change it via 'Forgot Password' on the login page."})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.data.statistics.totalBookings})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(E,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.data.statistics.completedBookings})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(c,{className:"w-4 h-4 text-red-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cancelled"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.data.statistics.cancelledBookings})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Spent"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.data.statistics.totalSpent.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Earned"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.data.statistics.totalEarned.toFixed(2)]})]})]}),[...s.data.clientBookings,...s.data.cleanerBookings].length>0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-primary"}),"Bookings Calendar (",[...s.data.clientBookings,...s.data.cleanerBookings].length,")"]})}),e.jsx("div",{className:"p-4",children:e.jsx(B,{bookings:[...s.data.clientBookings,...s.data.cleanerBookings],onBookingClick:l=>{t({to:"/admin-portal",search:{view:"calendar"}})},onCreateBooking:()=>{t({to:"/admin-portal",search:{view:"calendar"}})}})})]}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx(n,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No bookings found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"This customer hasn't made or been assigned to any bookings yet."})]})]})]}):null})})};export{$ as component};
