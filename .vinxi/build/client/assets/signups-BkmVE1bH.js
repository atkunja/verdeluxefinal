import{a as h,r as a,g as p,j as e,A as g,m as y}from"./index-D68JyPnQ.js";import{F as f}from"./funnel-Bkw8g59b.js";function u(l){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l)}const w=function(){const d=h(),[n,x]=a.useState(""),[s,m]=a.useState("ALL"),i=p(d.getQuizSubmissions.queryOptions()),c=a.useMemo(()=>i.data||[],[i.data]),o=a.useMemo(()=>c.filter(t=>{if(s==="ALL"||(s==="confirmed"?t.status:t.status),s!=="ALL"&&t.status!==s)return!1;const r=n.toLowerCase();return(t.fullName?.toLowerCase()||"").includes(r)||(t.email?.toLowerCase()||"").includes(r)||(t.phone?.toLowerCase()||"").includes(r)}),[c,s,n]);return e.jsxs(g,{title:"Online Signups",subtitle:"Log of 'Book Now' quiz submissions.",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700",children:[e.jsx(y,{className:"mr-2 h-4 w-4 text-gray-500"}),e.jsx("input",{value:n,onChange:t=>x(t.target.value),placeholder:"Search name, email, phone",className:"w-56 bg-transparent text-sm focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700",children:[e.jsx(f,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:s,onChange:t=>m(t.target.value),className:"bg-transparent focus:outline-none",children:[e.jsx("option",{value:"ALL",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"started",children:"Started"}),e.jsx("option",{value:"payment_pending",children:"Payment Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"})]})]})]}),e.jsx("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-[#f9fafb] text-left text-xs font-semibold text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3",children:"Customer"}),e.jsx("th",{className:"px-4 py-3",children:"Details"}),e.jsx("th",{className:"px-4 py-3",children:"Estimate"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 text-sm",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No signups found."})}):o.map(t=>e.jsxs("tr",{className:"hover:bg-[#f9fafb]",children:[e.jsx("td",{className:"px-4 py-3 text-gray-500 whitespace-nowrap",children:new Date(t.createdAt).toLocaleString()}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-[#0f172a]",children:t.fullName||"Unknown"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.email}),e.jsx("div",{className:"text-xs text-gray-500",children:t.phone})]}),e.jsx("td",{className:"px-4 py-3 text-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-0.5 text-xs",children:[t.cleanType&&e.jsx("span",{className:"font-medium",children:t.cleanType}),e.jsxs("span",{children:[t.bedrooms?`${t.bedrooms} Bed`:""," ",t.bathrooms?`â€¢ ${t.bathrooms} Bath`:""]}),e.jsx("span",{className:"text-gray-400 capitalize",children:t.city?`${t.addressLine1||""}, ${t.city}`:"No address"})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-700 font-mono text-xs",children:t.finalTotalCents?u(t.finalTotalCents/100):"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${t.status==="confirmed"?"bg-green-100 text-green-700":t.status==="payment_pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:t.status})})]},t.id))})]})})]})};export{w as component};
