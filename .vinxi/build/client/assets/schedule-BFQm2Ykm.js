import{j as e,u as w,a as k,b as v,k as d,g as O}from"./index-D68JyPnQ.js";import{u as C}from"./BookingWizardProvider-CZ44CSfS.js";import{W as I,S as M}from"./SummaryPanel-D7zU54v8.js";import{b as y}from"./analytics-Cg1IkZOG.js";import{a as u,b as P}from"./styles-CoJu3Vce.js";const g=["8:00 AM","9:00 AM","10:30 AM","12:00 PM","2:00 PM","4:00 PM"];function m(i){return i.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function A(){const i=w(),S=k(),{user:b}=v(),{draft:n,updateDraft:x}=C(),[r,l]=d.useState(()=>new Date);d.useEffect(()=>{y.stepViewed("time-date")},[]);const h=d.useMemo(()=>Array.from({length:7}).map((t,a)=>{const s=new Date(r);return s.setDate(r.getDate()+a),s}),[r]),o=n.schedule.dateISO?new Date(n.schedule.dateISO):h[0],j=o.toISOString().split("T")[0],p=O({...S.booking.getQuizAvailability.queryOptions({date:j}),enabled:!!o}),f=d.useMemo(()=>{if(p.data?.isFullyBooked)return[];const t=o.getDay();return t===0||t===6?g.slice(1,4):o.getDate()%5===0?[]:g},[p.data,o]);return e.jsx(I,{step:2,summary:e.jsx(M,{draft:n}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Select your time"}),e.jsx("p",{className:"text-sm text-[#5c5a55]",children:"Pick a date and time that works for you."})]}),e.jsx("button",{className:"rounded-full border border-[#e3ded2] bg-white p-2",type:"button"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-lg font-semibold",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:u,onClick:()=>l(new Date),children:"Today"}),e.jsx("button",{type:"button",className:u,onClick:()=>{const t=new Date(r);t.setDate(r.getDate()-7),l(t)},children:"Back"}),e.jsx("button",{type:"button",className:u,onClick:()=>{const t=new Date(r);t.setDate(r.getDate()+7),l(t)},children:"Next"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:h.map(t=>{const a=t.toISOString().split("T")[0],s=n.schedule.dateISO===a;return e.jsx("button",{type:"button",className:`rounded-full border px-4 py-2 text-sm font-semibold ${s?"border-[#163022] bg-[#163022] text-white":"border-[#e3ded2] bg-white text-[#163022]"}`,onClick:()=>{x({schedule:{...n.schedule,dateISO:a,label:m(t)}})},children:m(t)},a)})}),e.jsx("div",{className:"space-y-4",children:f.length===0?e.jsx("div",{className:"rounded-2xl border border-[#e3ded2] bg-white px-4 py-4 text-sm text-[#5c5a55]",children:"We're all booked on this day. Please select a different day in the future."}):Object.entries(f.reduce((t,a)=>{const s=a.split(" "),D=s[0]||"",N=s[1]||"",c=`${D.split(":")[0]} ${N.toLowerCase()}`;return t[c]=t[c]?[...t[c],a]:[a],t},{})).map(([t,a])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-[#163022]",children:t}),e.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3",children:a.map(s=>e.jsx("button",{type:"button",onClick:()=>{x({schedule:{...n.schedule,dateISO:n.schedule.dateISO||o.toISOString().split("T")[0],label:`${m(o)} - ${s}`,timeSlotStartISO:s}}),y.selectionMade("timeslot",s)},className:`rounded-2xl border px-3 py-3 text-sm font-semibold transition ${n.schedule.timeSlotStartISO===s?"border-[#163022] bg-[#f7f4ed]":"border-[#e3ded2] bg-white"}`,"aria-pressed":n.schedule.timeSlotStartISO===s,children:s},s))})]},t))}),e.jsx("button",{type:"button",className:`${P} w-full md:w-auto`,onClick:()=>{i(b?{to:"/booking-quiz/address-details"}:{to:"/booking-quiz/details"})},disabled:!n.schedule.label,children:b?"Continue →":"Add Contact Details →"})]})})}const Q=function(){return e.jsx(A,{})};export{Q as component};
