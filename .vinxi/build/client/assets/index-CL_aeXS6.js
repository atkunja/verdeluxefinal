import{c as N,b as C,a as M,g as b,d as _,r as f,j as e,A as $,L as D}from"./index-D68JyPnQ.js";import{C as A}from"./credit-card-rY5N0Qov.js";import{T as w}from"./trending-up-e0U5eMl_.js";import{C as y}from"./circle-check-big-DhNyGKn9.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],v=N("calendar-days",L);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],T=N("trending-down",S);function j({label:d,value:p,previous:l,changePct:o,icon:s,colorClass:r="text-primary"}){const n=o>=0;return e.jsxs("div",{className:"group relative overflow-hidden rounded-3xl border border-white/40 bg-white/60 p-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] backdrop-blur-md transition-all hover:shadow-[0_8px_30px_rgb(0,0,0,0.08)]",children:[e.jsx("div",{className:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-gray-50 to-gray-100 opacity-50 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:d}),e.jsx("div",{className:"mt-2 flex items-baseline gap-2",children:e.jsxs("div",{className:"text-3xl font-bold text-[#0f172a]",children:["$",p.toLocaleString()]})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-semibold ${n?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"}`,children:[n?e.jsx(w,{className:"h-3 w-3"}):e.jsx(T,{className:"h-3 w-3"}),Math.abs(o),"%"]}),e.jsx("span",{className:"text-xs text-gray-400",children:"vs last month"})]})]}),e.jsx("div",{className:`rounded-2xl bg-white p-3 shadow-sm border border-gray-100 ${r}`,children:e.jsx(s,{className:"h-6 w-6"})})]})]})}function P({points:d,labels:p}){if(d.length<2)return e.jsx("div",{className:"h-24 flex items-center justify-center text-gray-400 text-sm italic",children:"Insufficient data for trend"});const l=Math.max(...d,1),o=Math.min(...d,0),s=l-o||1,r=80,n=400,m=n/(d.length-1),h=d.map(i=>(i-o)/s*(r-20)+10),g=h.map((i,t)=>`${t===0?"M":"L"} ${t*m} ${r-i}`).join(" "),u=`${g} L ${n} ${r} L 0 ${r} Z`;return e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{viewBox:`0 0 ${n} ${r}`,className:"h-24 w-full overflow-visible",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#163022",stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:"#163022",stopOpacity:"0"})]})}),e.jsx("path",{d:u,fill:"url(#gradient)"}),e.jsx("path",{d:g,fill:"none",stroke:"#163022",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),h.map((i,t)=>e.jsx("g",{className:"group/dot",children:e.jsx("circle",{cx:t*m,cy:r-i,r:"4",fill:"#163022",className:"transition-all group-hover/dot:r-6"})},t))]}),e.jsx("div",{className:"mt-4 flex justify-between px-1 text-[10px] font-medium uppercase tracking-widest text-gray-400",children:p.map((i,t)=>e.jsx("span",{children:i},t))})]})}const U=function(){const{user:p}=C(),l=M(),o=p?.firstName||"Admin",s=b(l.getBookingStatsAdmin.queryOptions()),r=b(l.getAdminTasks.queryOptions()),n=b(l.payments.getPendingCharges.queryOptions()),m=_(l.stripe.createChargeWithSavedMethod.mutationOptions({onSuccess:()=>{n.refetch(),r.refetch()}})),h=f.useMemo(()=>new Date,[]),g=async(t,a,c,x)=>{if(window.confirm(`Charge $${x.toFixed(2)} to ${c}'s card?`))try{await m.mutateAsync({userId:a,bookingId:parseInt(t),amount:x}),alert("Charge successful!")}catch(k){alert(`Charge failed: ${k.message}`)}},u=f.useMemo(()=>{if(!s.data)return 0;const{currentMonthRevenue:t,previousMonthRevenue:a}=s.data;return a===0?t>0?100:0:Math.round((t-a)/a*100)},[s.data]),i=f.useMemo(()=>{if(!s.data)return 0;const{monthBookings:t,previousMonthBookings:a}=s.data;return a===0?t>0?100:0:Math.round((t-a)/a*100)},[s.data]);return e.jsxs($,{title:`Hello, ${o}!`,subtitle:"Here is what's happening with Verde Luxe today.",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx(j,{label:"Monthly Revenue",value:s.data?.currentMonthRevenue??0,previous:s.data?.previousMonthRevenue??0,changePct:u,icon:A,colorClass:"text-emerald-600"}),e.jsx(j,{label:"Monthly Bookings",value:s.data?.monthBookings??0,previous:s.data?.previousMonthBookings??0,changePct:i,icon:v,colorClass:"text-indigo-600"}),e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/60 p-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"My Calendar"}),e.jsx("div",{className:"text-xl font-bold text-[#0f172a]",children:new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric"}).format(h)})]}),e.jsx("div",{className:"rounded-2xl bg-white p-2.5 shadow-sm border border-gray-100 text-[#163022]",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"mt-4 grid grid-cols-7 gap-1.5 text-center",children:Array.from({length:7}).map((t,a)=>{const c=new Date(h);c.setDate(h.getDate()+a);const x=a===0;return e.jsxs("div",{className:`rounded-xl py-2 transition-colors ${x?"bg-[#163022] text-white shadow-md":"bg-gray-50/50 text-gray-600 hover:bg-gray-100/50"}`,children:[e.jsx("div",{className:`text-[10px] font-bold uppercase ${x?"text-white/80":"text-gray-400"}`,children:new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(c)[0]}),e.jsx("div",{className:"text-sm font-bold",children:c.getDate()})]},a)})})]})]}),e.jsxs("div",{className:"mt-8 grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/60 p-8 shadow-[0_8px_30px_rgb(0,0,0,0.04)] backdrop-blur-md lg:col-span-2",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-[#0f172a]",children:"Revenue Trends"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Performance over the last 6 months"})]}),e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white shadow-sm border border-gray-100",children:e.jsx(w,{className:"h-5 w-5 text-[#163022]"})})]}),e.jsx(P,{points:s.data?.revenueTrends.map(t=>t.revenue)??[],labels:s.data?.revenueTrends.map(t=>t.month)??[]})]}),e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/60 p-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] backdrop-blur-md",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between px-1",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0f172a]",children:"Pending Charges"}),e.jsx("span",{className:"rounded-full bg-amber-50 px-2.5 py-1 text-xs font-bold text-amber-700 border border-amber-100",children:n.data?.length??0})]}),e.jsxs("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-1 custom-scrollbar",children:[n.data?.map(t=>e.jsx("div",{className:"group rounded-2xl border border-gray-100 bg-white p-4 transition-all hover:border-gray-200 hover:shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate text-sm font-bold text-[#0f172a]",children:t.customer.name}),e.jsxs("div",{className:"mt-0.5 text-[11px] font-medium text-gray-400 uppercase tracking-wider",children:[t.serviceDate," â€¢ ",t.serviceTime]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-base font-bold text-[#163022]",children:["$",t.amount.toFixed(2)]}),e.jsx("button",{onClick:()=>g(t.id,t.customer.id,t.customer.name,t.amount),disabled:m.isPending,className:"mt-2 inline-flex items-center rounded-xl bg-[#163022] px-3.5 py-1.5 text-[11px] font-bold text-white shadow-sm transition-all hover:bg-[#10271b] hover:shadow-md disabled:opacity-50",children:m.isPending?"...":"Charge"})]})]})},t.id)),n.isLoading&&e.jsx("div",{className:"py-8 text-center text-sm text-gray-400 italic",children:"Finding charges..."}),n.data?.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"mb-3 rounded-2xl bg-gray-50 p-4",children:e.jsx(y,{className:"h-6 w-6 text-gray-300"})}),e.jsx("p",{className:"text-sm font-medium text-gray-400 italic",children:"All jobs are squared away!"})]})]})]})]}),e.jsxs("div",{className:"mt-8 grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/60 p-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] backdrop-blur-md lg:col-span-1 min-h-[460px]",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between px-1",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0f172a]",children:"Action Center"}),e.jsx("span",{className:"rounded-full bg-rose-50 px-2.5 py-1 text-xs font-bold text-rose-700 border border-rose-100",children:r.data?.length??0})]}),e.jsxs("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-2 custom-scrollbar",children:[r.data?.map(t=>{const a=t.color.split(" "),c=a[0]||"bg-gray-100",x=a[1]||"text-gray-700";return e.jsxs("div",{className:"flex items-start gap-4 rounded-2xl border border-gray-50 bg-white/80 p-4 transition-all hover:shadow-sm",children:[e.jsx("div",{className:`mt-0.5 flex h-10 w-10 shrink-0 items-center justify-center rounded-2xl shadow-sm border border-white ${c} ${x.replace("text-","text-opacity-80 text-")}`,children:e.jsx(y,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-[#0f172a]",children:t.title}),e.jsx("div",{className:"mt-1 text-xs leading-relaxed text-gray-500",children:t.description}),e.jsx("div",{className:"mt-2 text-[10px] font-bold uppercase tracking-wider text-gray-400",children:t.time})]})]},t.id)}),r.isLoading&&e.jsx("div",{className:"py-12 text-center text-sm text-gray-400 italic",children:"Busy organizing..."}),r.data?.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"mb-4 rounded-3xl bg-emerald-50 p-6",children:e.jsx(y,{className:"h-10 w-10 text-emerald-500"})}),e.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"Inbox Zero!"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Everything is up to date."})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/60 p-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] backdrop-blur-md lg:col-span-2",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-[#0f172a]",children:"Upcoming Jobs"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Next 10 service appointments"})]}),e.jsx(D,{to:"/admin-portal/bookings",className:"text-xs font-bold text-[#163022] hover:underline",children:"View All"})]}),e.jsxs("div",{className:"space-y-3 max-h-[380px] overflow-y-auto pr-2 custom-scrollbar",children:[s.data?.upcomingAppointments.map(t=>e.jsxs("div",{className:"group flex items-center justify-between rounded-2xl border border-gray-50 bg-white p-4 transition-all hover:border-gray-100 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gray-50 text-gray-400 transition-colors group-hover:bg-[#163022]/5 group-hover:text-[#163022]",children:e.jsx(v,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-[#0f172a]",children:[t.client.firstName," ",t.client.lastName]}),e.jsx("div",{className:"mt-0.5 text-[11px] font-bold text-gray-400 uppercase tracking-widest",children:t.serviceType}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-gray-500 font-medium",children:[e.jsx("span",{children:new Date(t.scheduledDate).toLocaleDateString()}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-gray-300"}),e.jsx("span",{children:t.scheduledTime})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[t.cleaner&&e.jsx("div",{className:"hidden items-center gap-2 sm:flex",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-current border-opacity-10 px-3 py-1 text-[11px] font-bold",style:{backgroundColor:`${t.cleaner.color??"#000000"}08`,color:t.cleaner.color??"#000000"},children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:t.cleaner.color??"#000000"}}),t.cleaner.firstName]})}),e.jsxs("div",{className:"min-w-[80px] text-right",children:[e.jsxs("div",{className:"text-base font-bold text-[#0f172a]",children:["$",(t.finalPrice??0).toFixed(0)]}),e.jsx("div",{className:`mt-0.5 text-[10px] font-bold uppercase tracking-widest ${t.paymentStatus==="Paid"?"text-emerald-600":"text-amber-600"}`,children:t.paymentStatus??"Unpaid"})]})]})]},t.id)),s.isLoading&&e.jsx("div",{className:"py-12 text-center text-sm text-gray-400 italic",children:"Syncing with calendar..."}),(!s.data?.upcomingAppointments||s.data.upcomingAppointments.length===0)&&e.jsx("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-50/50 rounded-2xl border border-dashed border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"No upcoming jobs found."})})]})]})]})]})};export{U as component};
