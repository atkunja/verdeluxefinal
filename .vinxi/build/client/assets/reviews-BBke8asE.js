import{c as h,a as p,g as b,d as c,z as i,j as e,A as u,T as y,M as f}from"./index-D68JyPnQ.js";import{C as j}from"./clock-04BLIM7u.js";import{G as N}from"./globe-D5ZtC8Lx.js";import{S as l}from"./star-CaT70wlV.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],w=h("lock",v),C=function(){const r=p(),a=b(r.reviews.getReviewsAdmin.queryOptions()),n=a.data||[],o=c(r.reviews.updateReviewAdmin.mutationOptions({onSuccess:()=>{i.success("Review updated"),a.refetch()}})),d=c(r.reviews.deleteReviewAdmin.mutationOptions({onSuccess:()=>{i.success("Review deleted"),a.refetch()}})),m=async(s,t)=>{try{await o.mutateAsync({id:s,isPublic:!t})}catch(g){i.error(g.message)}},x=async s=>{if(confirm("Delete this review?"))try{await d.mutateAsync({id:s})}catch(t){i.error(t.message)}};return e.jsx(u,{title:"User Reviews",subtitle:"Manage client feedback and visibility.",children:e.jsxs("div",{className:"grid gap-6",children:[n.map(s=>e.jsxs("div",{className:"group relative rounded-2xl border border-gray-100 bg-white p-6 shadow-sm transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-[#0f172a]",children:[s.booking.client.firstName," ",s.booking.client.lastName]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(j,{className:"h-3.5 w-3.5"}),new Date(s.createdAt).toLocaleDateString()]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m(s.id,s.isPublic),className:`inline-flex items-center gap-2 rounded-xl px-3 py-1.5 text-xs font-bold transition-all ${s.isPublic?"bg-green-50 text-green-700 border border-green-100 hover:bg-green-100":"bg-gray-50 text-gray-500 border border-gray-100 hover:bg-gray-100"}`,children:[s.isPublic?e.jsx(N,{className:"h-3.5 w-3.5"}):e.jsx(w,{className:"h-3.5 w-3.5"}),s.isPublic?"Public":"Private"]}),e.jsx("button",{onClick:()=>x(s.id),className:"p-1.5 rounded-lg text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100",children:e.jsx(y,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex items-center gap-0.5 mb-3",children:[1,2,3,4,5].map(t=>e.jsx(l,{className:`h-4 w-4 ${t<=s.rating?"fill-amber-400 text-amber-400":"text-gray-200"}`},t))}),e.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed mb-4",children:['"',s.comment||"No comment provided.",'"']}),e.jsxs("div",{className:"pt-4 border-t border-gray-50 flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-400",children:["Booking ID: #",s.bookingId," â€¢ Service: ",s.booking.serviceType]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-3.5 w-3.5 text-primary/40"}),e.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-primary/40",children:"Verified Booking"})]})]})]},s.id)),a.isLoading&&e.jsx("div",{className:"py-20 text-center text-gray-400 italic",children:"Gathering feedback..."}),!a.isLoading&&n.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-50 rounded-3xl border border-dashed border-gray-200 text-center p-10",children:[e.jsx("div",{className:"mb-4 rounded-full bg-white p-4 shadow-sm",children:e.jsx(l,{className:"h-8 w-8 text-gray-200"})}),e.jsx("h3",{className:"text-lg font-bold text-[#0f172a]",children:"No Reviews Yet"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-xs mt-1",children:"Client reviews will appear here once they start submitting feedback after their appointments."})]})]})})};export{C as component};
