import{a as D,r as u,g as C,d,p as h,o as E,j as e,A as M,X as S,T as P,e as O,s as b}from"./index-D68JyPnQ.js";import{u as L,a as I}from"./zod-Us8nOtev.js";import{P as H}from"./plus-BeADQoDx.js";import{C as g}from"./circle-check-big-DhNyGKn9.js";const A=E({title:b().min(1,"Title is required"),description:b().optional(),priority:O(["LOW","MEDIUM","HIGH"])}),Q=function(){const r=D(),[a,c]=u.useState(new Date),[p,o]=u.useState(!1),t=C(r.tasks.getDailyTasks.queryOptions({date:a})),i=d(r.tasks.createTask.mutationOptions({onSuccess:()=>{t.refetch(),o(!1),h.success("Task created")}})),y=d(r.tasks.updateTask.mutationOptions({onSuccess:()=>{t.refetch()}})),f=d(r.tasks.deleteTask.mutationOptions({onSuccess:()=>{t.refetch(),h.success("Task deleted")}})),{register:n,handleSubmit:j,reset:N,formState:{errors:x}}=L({resolver:I(A),defaultValues:{priority:"MEDIUM"}}),w=s=>{i.mutate({...s,date:a}),N()},v=s=>{const l=s.status==="COMPLETED"?"PENDING":"COMPLETED";y.mutate({id:s.id,status:l})},T=s=>{window.confirm("Are you sure you want to delete this task?")&&f.mutate({id:s})},k=new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).format(a),m=s=>{const l=new Date(a);l.setDate(a.getDate()+s),c(l)};return e.jsx(M,{title:"Daily Tasks",subtitle:"Manage your manual to-do list",children:e.jsxs("div",{className:"flex gap-6 flex-col lg:flex-row",children:[e.jsx("div",{className:"w-full lg:w-80 shrink-0",children:e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/60 p-6 shadow-sm backdrop-blur-md sticky top-6",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0f172a] mb-4",children:"Select Date"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>m(-1),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-500",children:"←"}),e.jsx("span",{className:"font-semibold text-gray-700",children:a.toLocaleDateString()}),e.jsx("button",{onClick:()=>m(1),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-500",children:"→"})]}),e.jsx("button",{onClick:()=>c(new Date),className:"w-full py-2 bg-[#163022] text-white rounded-xl font-bold text-sm hover:bg-[#10271b] transition-colors",children:"Today"})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/60 p-6 shadow-sm backdrop-blur-md min-h-[500px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-[#0f172a]",children:k}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[t.data?.length??0," tasks for this day"]})]}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-bold hover:bg-emerald-100 transition-colors",children:[e.jsx(H,{className:"w-4 h-4"})," Add Task"]})]}),p&&e.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-100 rounded-2xl shadow-sm animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"New Task"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:j(w),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),e.jsx("input",{...n("title"),className:"w-full rounded-xl border-gray-200 focus:border-[#163022] focus:ring-[#163022]",placeholder:"e.g. Call vendor regarding supplies"}),x.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Description"}),e.jsx("textarea",{...n("description"),rows:2,className:"w-full rounded-xl border-gray-200 focus:border-[#163022] focus:ring-[#163022]",placeholder:"Optional details..."})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Priority"}),e.jsxs("select",{...n("priority"),className:"w-full rounded-xl border-gray-200 focus:border-[#163022] focus:ring-[#163022]",children:[e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"HIGH",children:"High"})]})]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("button",{type:"submit",disabled:i.isPending,className:"px-6 py-2 bg-[#163022] text-white rounded-xl font-bold hover:bg-[#10271b] disabled:opacity-50",children:i.isPending?"Saving...":"Create Task"})})]})]}),e.jsx("div",{className:"space-y-3",children:t.isLoading?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading tasks..."}):t.data?.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-300",children:e.jsx(g,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"No tasks yet"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Enjoy your day or add a new task above."})]}):t.data?.map(s=>e.jsxs("div",{className:`group relative flex items-start gap-4 p-4 rounded-2xl border transition-all ${s.status==="COMPLETED"?"bg-gray-50 border-gray-100 opacity-75":"bg-white border-gray-100 hover:border-gray-200 hover:shadow-md"}`,children:[e.jsx("button",{onClick:()=>v(s),className:`mt-0.5 flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${s.status==="COMPLETED"?"bg-emerald-500 border-emerald-500 text-white":"border-gray-300 hover:border-emerald-500 text-transparent"}`,children:e.jsx(g,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-bold ${s.status==="COMPLETED"?"text-gray-500 line-through":"text-[#0f172a]"}`,children:s.title}),s.description&&e.jsx("p",{className:`text-xs mt-1 ${s.status==="COMPLETED"?"text-gray-400":"text-gray-500"}`,children:s.description}),e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${s.priority==="HIGH"?"bg-rose-50 text-rose-700":s.priority==="MEDIUM"?"bg-amber-50 text-amber-700":"bg-blue-50 text-blue-700"}`,children:s.priority})})]}),e.jsx("button",{onClick:()=>T(s.id),className:"p-2 text-gray-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(P,{className:"w-4 h-4"})})]},s.id))})]})})]})})};export{Q as component};
