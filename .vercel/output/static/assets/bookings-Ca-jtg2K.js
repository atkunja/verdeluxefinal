import{c as Ge,r as d,j as n,X as Me,k as w,D as $r,E as Ft,F as At,G as Fr,a as Ke,f as vt,d as oe,p as Ue,g as Pe,U as Ar,m as Tr,n as Pr,A as Dr,z as L}from"./index-D68JyPnQ.js";import{T as Or}from"./triangle-alert-DYKA_FWn.js";import{C as Mr}from"./calendar-sVqVbs5g.js";import{C as _e}from"./circle-alert-Cfu_jE4B.js";import{C as Lr}from"./circle-check-KVYfCMLA.js";import{L as Gt}from"./loader-circle-ZVWRwCK0.js";import{c as Ir,d as Rr,e as Br,p as Hr,r as qr,f as _r}from"./adminPortal-KrRNUMwu.js";import{a as Ur}from"./formatTime-R4Jm2Dpf.js";import{C as Wr}from"./clock-04BLIM7u.js";import{E as Vr}from"./external-link-CCSPuh3n.js";import{M as zr}from"./map-pin-BUW29wY0.js";import{U as Gr}from"./user-plus-D9h12H7H.js";import{C as Kr}from"./circle-check-big-DhNyGKn9.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Qr=Ge("eye-off",Yr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zr=Ge("eye",Xr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],en=Ge("navigation",Jr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],rn=Ge("signal",tn);function nn({isOpen:e,onClose:t,booking:r,onConfirm:s}){const[a,l]=d.useState("single"),[c,i]=d.useState(!1),[o,m]=d.useState(0),[f,y]=d.useState(!0),[x,p]=d.useState(!1),[b,g]=d.useState(""),[v,k]=d.useState(!1);if(!e||!r)return null;const $=async()=>{k(!0);try{await s({scope:a,applyFee:c,feeAmount:c?o:void 0,notifyEmail:f,notifySms:x,reason:b}),t()}catch(N){console.error("Cancellation failed",N)}finally{k(!1)}},C=(r.price*.5).toFixed(2);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200",children:n.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl transform transition-all scale-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-5",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-red-50 flex items-center justify-center",children:n.jsx(Or,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Cancel Booking"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["#",r.id," • ",r.customerName]})]})]}),n.jsx("button",{onClick:t,className:"rounded-full p-1 hover:bg-gray-100 text-gray-400 hover:text-gray-600",children:n.jsx(Me,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-red-50/50 border border-red-100 rounded-lg p-3 text-sm text-red-800",children:[n.jsx("p",{className:"font-medium",children:"Are you sure you want to cancel this booking?"}),n.jsxs("p",{className:"tex-xs mt-1 text-red-700/80",children:[r.date," at ",r.time]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Cancellation Scope"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("button",{onClick:()=>l("single"),className:`px-3 py-2 text-sm rounded-lg border text-center transition-colors ${a==="single"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:"This Booking Only"}),n.jsx("button",{onClick:()=>l("series"),className:`px-3 py-2 text-sm rounded-lg border text-center transition-colors ${a==="series"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:"All Future Bookings"})]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"applyFee",checked:c,onChange:N=>{i(N.target.checked),N.target.checked&&o===0&&m(Number(C))},className:"h-4 w-4 rounded border-gray-300 text-[#163022] focus:ring-[#163022]"}),n.jsx("label",{htmlFor:"applyFee",className:"text-sm font-medium text-gray-900",children:"Apply Cancellation Fee"})]})}),c&&n.jsxs("div",{className:"pl-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),n.jsx("input",{type:"number",value:o,onChange:N=>m(Number(N.target.value)),className:"block w-full rounded-md border border-gray-200 pl-7 pr-3 py-1.5 text-sm focus:border-[#163022] focus:outline-none"})]}),n.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["Typically 50% of booking total ($",r.price.toFixed(2),")"]})]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3 space-y-2",children:[n.jsx("span",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Notifications"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"notifyEmail",checked:f,onChange:N=>y(N.target.checked),className:"h-4 w-4 rounded border-gray-300 text-[#163022] focus:ring-[#163022]"}),n.jsx("label",{htmlFor:"notifyEmail",className:"text-sm text-gray-700",children:"Send email to customer"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"notifySms",checked:x,onChange:N=>p(N.target.checked),className:"h-4 w-4 rounded border-gray-300 text-[#163022] focus:ring-[#163022]"}),n.jsx("label",{htmlFor:"notifySms",className:"text-sm text-gray-700",children:"Send SMS to customer"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Cancellation Reason (Internal)"}),n.jsx("textarea",{value:b,onChange:N=>g(N.target.value),placeholder:"e.g. Schedule conflict, Customer request...",className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm h-20 focus:border-[#163022] focus:outline-none resize-none"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{onClick:t,className:"flex-1 rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:v,children:"Keep Booking"}),n.jsx("button",{onClick:$,className:"flex-1 rounded-xl bg-red-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-red-700 shadow-sm disabled:opacity-70",disabled:v,children:v?"Cancelling...":"Confirm Cancellation"})]})]})]})})}function sn({isOpen:e,onClose:t,booking:r,onConfirm:s}){const[a,l]=d.useState("single"),[c,i]=d.useState(!1);if(!e||!r)return null;const o=async()=>{i(!0);try{await s(a),t()}catch(m){console.error("Move failed",m)}finally{i(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200",children:n.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl transform transition-all scale-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-5",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center",children:n.jsx(Mr,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Move Booking"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["#",r.id," • ",r.customerName]})]})]}),n.jsx("button",{onClick:t,className:"rounded-full p-1 hover:bg-gray-100 text-gray-400 hover:text-gray-600",children:n.jsx(Me,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-3 text-sm text-blue-800",children:[n.jsx("p",{className:"font-medium",children:"Rescheduling this booking"}),n.jsx("p",{className:"text-xs mt-1 text-blue-700/80",children:"You are moving this booking to a new date."})]}),r.isRecurring?n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Move Scope"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("button",{onClick:()=>l("single"),className:`px-3 py-2 text-sm rounded-lg border text-center transition-colors ${a==="single"?"bg-gray-900 text-white border-gray-900 shadow-sm":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:"This Booking Only"}),n.jsx("button",{onClick:()=>l("series"),className:`px-3 py-2 text-sm rounded-lg border text-center transition-colors ${a==="series"?"bg-gray-900 text-white border-gray-900 shadow-sm":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:"This & All Future"})]}),n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-amber-50 border border-amber-100 rounded-lg text-[11px] text-amber-800",children:[n.jsx(_e,{className:"w-3.5 h-3.5 mt-0.5 flex-shrink-0"}),n.jsx("p",{children:a==="series"?"Moving the series will shift all future occurrences relative to the new date.":"Moving only this occurrence will not affect the rest of the schedule."})]})]}):n.jsx("p",{className:"text-sm text-gray-600",children:"Confirm you want to move this booking to the selected date."}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{onClick:t,className:"flex-1 rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:c,children:"Cancel"}),n.jsx("button",{onClick:o,className:"flex-1 rounded-xl bg-[#163022] px-4 py-2.5 text-sm font-semibold text-white hover:bg-[#0f241a] shadow-sm disabled:opacity-70",disabled:c,children:c?"Moving...":"Confirm Move"})]})]})]})})}function an({isOpen:e,onClose:t,title:r,description:s,confirmLabel:a="Confirm",cancelLabel:l="Cancel",variant:c="info",onConfirm:i}){const[o,m]=d.useState(!1);if(!e)return null;const f=async()=>{m(!0);try{await i(),t()}catch(p){console.error("Action failed",p)}finally{m(!1)}},x={danger:{icon:n.jsx(_e,{className:"w-5 h-5 text-red-600"}),iconBg:"bg-red-50",button:"bg-red-600 hover:bg-red-700"},warning:{icon:n.jsx(_e,{className:"w-5 h-5 text-amber-600"}),iconBg:"bg-amber-50",button:"bg-amber-600 hover:bg-amber-700"},success:{icon:n.jsx(Lr,{className:"w-5 h-5 text-emerald-600"}),iconBg:"bg-emerald-50",button:"bg-emerald-600 hover:bg-emerald-700"},info:{icon:n.jsx(_e,{className:"w-5 h-5 text-blue-600"}),iconBg:"bg-blue-50",button:"bg-[#163022] hover:bg-[#0f241a]"}}[c];return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200",children:n.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl transform transition-all scale-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-5",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full ${x.iconBg} flex items-center justify-center`,children:x.icon}),n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:r})]}),n.jsx("button",{onClick:t,className:"rounded-full p-1 hover:bg-gray-100 text-gray-400 hover:text-gray-600",children:n.jsx(Me,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:s}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{onClick:t,className:"flex-1 rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:o,children:l}),n.jsx("button",{onClick:f,className:`flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold text-white shadow-sm disabled:opacity-70 transition-colors ${x.button}`,disabled:o,children:o?"Processing...":a})]})]})]})})}var ln=Object.defineProperty,on=(e,t,r)=>t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,it=(e,t,r)=>(on(e,typeof t!="symbol"?t+"":t,r),r);let cn=class{constructor(){it(this,"current",this.detect()),it(this,"handoffState","pending"),it(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ve=new cn;function Ye(e){var t,r;return ve.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(r=(t=e.current)==null?void 0:t.ownerDocument)!=null?r:document:null:document}function Qe(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function re(){let e=[],t={addEventListener(r,s,a,l){return r.addEventListener(s,a,l),t.add(()=>r.removeEventListener(s,a,l))},requestAnimationFrame(...r){let s=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let s=setTimeout(...r);return t.add(()=>clearTimeout(s))},microTask(...r){let s={current:!0};return Qe(()=>{s.current&&r[0]()}),t.add(()=>{s.current=!1})},style(r,s,a){let l=r.style.getPropertyValue(s);return Object.assign(r.style,{[s]:a}),this.add(()=>{Object.assign(r.style,{[s]:l})})},group(r){let s=re();return r(s),this.add(()=>s.dispose())},add(r){return e.includes(r)||e.push(r),()=>{let s=e.indexOf(r);if(s>=0)for(let a of e.splice(s,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function jt(){let[e]=d.useState(re);return d.useEffect(()=>()=>e.dispose(),[e]),e}let O=(e,t)=>{ve.isServer?d.useEffect(e,t):d.useLayoutEffect(e,t)};function Ne(e){let t=d.useRef(e);return O(()=>{t.current=e},[e]),t}let F=function(e){let t=Ne(e);return w.useCallback((...r)=>t.current(...r),[t])},dn=d.createContext(void 0);function un(){return d.useContext(dn)}function ft(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function te(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,te),s}var We=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(We||{}),de=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(de||{});function U(){let e=fn();return d.useCallback(t=>mn({mergeRefs:e,...t}),[e])}function mn({ourProps:e,theirProps:t,slot:r,defaultTag:s,features:a,visible:l=!0,name:c,mergeRefs:i}){i=i??pn;let o=Kt(t,e);if(l)return He(o,r,s,c,i);let m=a??0;if(m&2){let{static:f=!1,...y}=o;if(f)return He(y,r,s,c,i)}if(m&1){let{unmount:f=!0,...y}=o;return te(f?0:1,{0(){return null},1(){return He({...y,hidden:!0,style:{display:"none"}},r,s,c,i)}})}return He(o,r,s,c,i)}function He(e,t={},r,s,a){let{as:l=r,children:c,refName:i="ref",...o}=ot(e,["unmount","static"]),m=e.ref!==void 0?{[i]:e.ref}:{},f=typeof c=="function"?c(t):c;"className"in o&&o.className&&typeof o.className=="function"&&(o.className=o.className(t)),o["aria-labelledby"]&&o["aria-labelledby"]===o.id&&(o["aria-labelledby"]=void 0);let y={};if(t){let x=!1,p=[];for(let[b,g]of Object.entries(t))typeof g=="boolean"&&(x=!0),g===!0&&p.push(b.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(x){y["data-headlessui-state"]=p.join(" ");for(let b of p)y[`data-${b}`]=""}}if(l===d.Fragment&&(Object.keys(ge(o)).length>0||Object.keys(ge(y)).length>0))if(!d.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(ge(o)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ge(o)).concat(Object.keys(ge(y))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=f.props,p=x?.className,b=typeof p=="function"?(...k)=>ft(p(...k),o.className):ft(p,o.className),g=b?{className:b}:{},v=Kt(f.props,ge(ot(o,["ref"])));for(let k in y)k in v&&delete y[k];return d.cloneElement(f,Object.assign({},v,y,m,{ref:a(hn(f),m.ref)},g))}return d.createElement(l,Object.assign({},ot(o,["ref"]),l!==d.Fragment&&m,l!==d.Fragment&&y),f)}function fn(){let e=d.useRef([]),t=d.useCallback(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)},[]);return(...r)=>{if(!r.every(s=>s==null))return e.current=r,t}}function pn(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function Kt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let s of e)for(let a in s)a.startsWith("on")&&typeof s[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(s[a])):t[a]=s[a];if(t.disabled||t["aria-disabled"])for(let s in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(r[s]=[a=>{var l;return(l=a?.preventDefault)==null?void 0:l.call(a)}]);for(let s in r)Object.assign(t,{[s](a,...l){let c=r[s];for(let i of c){if((a instanceof Event||a?.nativeEvent instanceof Event)&&a.defaultPrevented)return;i(a,...l)}}});return t}function I(e){var t;return Object.assign(d.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ge(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function ot(e,t=[]){let r=Object.assign({},e);for(let s of t)s in r&&delete r[s];return r}function hn(e){return w.version.split(".")[0]>="19"?e.props.ref:e.ref}let xn="span";var Ve=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ve||{});function gn(e,t){var r;let{features:s=1,...a}=e,l={ref:t,"aria-hidden":(s&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return U()({ourProps:l,theirProps:a,slot:{},defaultTag:xn,name:"Hidden"})}let pt=I(gn);function Yt(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function me(e){return Yt(e)&&"tagName"in e}function we(e){return me(e)&&"accessKey"in e}function ue(e){return me(e)&&"tabIndex"in e}function yn(e){return me(e)&&"style"in e}function bn(e){return we(e)&&e.nodeName==="IFRAME"}function vn(e){return we(e)&&e.nodeName==="INPUT"}let Qt=Symbol();function jn(e,t=!0){return Object.assign(e,{[Qt]:t})}function Q(...e){let t=d.useRef(e);d.useEffect(()=>{t.current=e},[e]);let r=F(s=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(s):a.current=s)});return e.every(s=>s==null||s?.[Qt])?void 0:r}let wt=d.createContext(null);wt.displayName="DescriptionContext";function Xt(){let e=d.useContext(wt);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Xt),t}return e}function wn(){let[e,t]=d.useState([]);return[e.length>0?e.join(" "):void 0,d.useMemo(()=>function(r){let s=F(l=>(t(c=>[...c,l]),()=>t(c=>{let i=c.slice(),o=i.indexOf(l);return o!==-1&&i.splice(o,1),i}))),a=d.useMemo(()=>({register:s,slot:r.slot,name:r.name,props:r.props,value:r.value}),[s,r.slot,r.name,r.props,r.value]);return w.createElement(wt.Provider,{value:a},r.children)},[t])]}let Nn="p";function Cn(e,t){let r=d.useId(),s=un(),{id:a=`headlessui-description-${r}`,...l}=e,c=Xt(),i=Q(t);O(()=>c.register(a),[a,c.register]);let o=s||!1,m=d.useMemo(()=>({...c.slot,disabled:o}),[c.slot,o]),f={ref:i,...c.props,id:a};return U()({ourProps:f,theirProps:l,slot:m,defaultTag:Nn,name:c.name||"Description"})}let kn=I(Cn),Sn=Object.assign(kn,{});var Zt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Zt||{});let En=d.createContext(()=>{});function $n({value:e,children:t}){return w.createElement(En.Provider,{value:e},t)}let Jt=class extends Map{constructor(t){super(),this.factory=t}get(t){let r=super.get(t);return r===void 0&&(r=this.factory(t),this.set(t,r)),r}};var Fn=Object.defineProperty,An=(e,t,r)=>t in e?Fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Tn=(e,t,r)=>(An(e,t+"",r),r),er=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},_=(e,t,r)=>(er(e,t,"read from private field"),r?r.call(e):t.get(e)),ct=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Tt=(e,t,r,s)=>(er(e,t,"write to private field"),t.set(e,r),r),Y,Fe,Ae;let Pn=class{constructor(t){ct(this,Y,{}),ct(this,Fe,new Jt(()=>new Set)),ct(this,Ae,new Set),Tn(this,"disposables",re()),Tt(this,Y,t)}dispose(){this.disposables.dispose()}get state(){return _(this,Y)}subscribe(t,r){let s={selector:t,callback:r,current:t(_(this,Y))};return _(this,Ae).add(s),this.disposables.add(()=>{_(this,Ae).delete(s)})}on(t,r){return _(this,Fe).get(t).add(r),this.disposables.add(()=>{_(this,Fe).get(t).delete(r)})}send(t){let r=this.reduce(_(this,Y),t);if(r!==_(this,Y)){Tt(this,Y,r);for(let s of _(this,Ae)){let a=s.selector(_(this,Y));tr(s.current,a)||(s.current=a,s.callback(a))}for(let s of _(this,Fe).get(t.type))s(_(this,Y),t)}}};Y=new WeakMap,Fe=new WeakMap,Ae=new WeakMap;function tr(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:dt(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:dt(e.entries(),t.entries()):Pt(e)&&Pt(t)?dt(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function dt(e,t){do{let r=e.next(),s=t.next();if(r.done&&s.done)return!0;if(r.done||s.done||!Object.is(r.value,s.value))return!1}while(!0)}function Pt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var Dn=Object.defineProperty,On=(e,t,r)=>t in e?Dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dt=(e,t,r)=>(On(e,typeof t!="symbol"?t+"":t,r),r),Mn=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Mn||{});let Ln={0(e,t){let r=t.id,s=e.stack,a=e.stack.indexOf(r);if(a!==-1){let l=e.stack.slice();return l.splice(a,1),l.push(r),s=l,{...e,stack:s}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,s=e.stack.indexOf(r);if(s===-1)return e;let a=e.stack.slice();return a.splice(s,1),{...e,stack:a}}},In=class rr extends Pn{constructor(){super(...arguments),Dt(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Dt(this,"selectors",{isTop:(t,r)=>t.stack[t.stack.length-1]===r,inStack:(t,r)=>t.stack.includes(r)})}static new(){return new rr({stack:[]})}reduce(t,r){return te(r.type,Ln,t,r)}};const nr=new Jt(()=>In.new());var ut={exports:{}},mt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot;function Rn(){if(Ot)return mt;Ot=1;var e=$r();function t(o,m){return o===m&&(o!==0||1/o===1/m)||o!==o&&m!==m}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=e.useRef,l=e.useEffect,c=e.useMemo,i=e.useDebugValue;return mt.useSyncExternalStoreWithSelector=function(o,m,f,y,x){var p=a(null);if(p.current===null){var b={hasValue:!1,value:null};p.current=b}else b=p.current;p=c(function(){function v(T){if(!k){if(k=!0,$=T,T=y(T),x!==void 0&&b.hasValue){var P=b.value;if(x(P,T))return C=P}return C=T}if(P=C,r($,T))return P;var E=y(T);return x!==void 0&&x(P,E)?($=T,P):($=T,C=E)}var k=!1,$,C,N=f===void 0?null:f;return[function(){return v(m())},N===null?void 0:function(){return v(N())}]},[m,f,y,x]);var g=s(o,p[0],p[1]);return l(function(){b.hasValue=!0,b.value=g},[g]),i(g),g},mt}var Mt;function Bn(){return Mt||(Mt=1,ut.exports=Rn()),ut.exports}var Hn=Bn();function sr(e,t,r=tr){return Hn.useSyncExternalStoreWithSelector(F(s=>e.subscribe(qn,s)),F(()=>e.state),F(()=>e.state),F(t),r)}function qn(e){return e}function Le(e,t){let r=d.useId(),s=nr.get(t),[a,l]=sr(s,d.useCallback(c=>[s.selectors.isTop(c,r),s.selectors.inStack(c,r)],[s,r]));return O(()=>{if(e)return s.actions.push(r),()=>s.actions.pop(r)},[s,e,r]),e?l?a:!0:!1}let ht=new Map,De=new Map;function Lt(e){var t;let r=(t=De.get(e))!=null?t:0;return De.set(e,r+1),r!==0?()=>It(e):(ht.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>It(e))}function It(e){var t;let r=(t=De.get(e))!=null?t:1;if(r===1?De.delete(e):De.set(e,r-1),r!==1)return;let s=ht.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,ht.delete(e))}function _n(e,{allowed:t,disallowed:r}={}){let s=Le(e,"inert-others");O(()=>{var a,l;if(!s)return;let c=re();for(let o of(a=r?.())!=null?a:[])o&&c.add(Lt(o));let i=(l=t?.())!=null?l:[];for(let o of i){if(!o)continue;let m=Ye(o);if(!m)continue;let f=o.parentElement;for(;f&&f!==m.body;){for(let y of f.children)i.some(x=>y.contains(x))||c.add(Lt(y));f=f.parentElement}}return c.dispose},[s,t,r])}function Un(e,t,r){let s=Ne(a=>{let l=a.getBoundingClientRect();l.x===0&&l.y===0&&l.width===0&&l.height===0&&r()});d.useEffect(()=>{if(!e)return;let a=t===null?null:we(t)?t:t.current;if(!a)return;let l=re();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>s.current(a));c.observe(a),l.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>s.current(a));c.observe(a),l.add(()=>c.disconnect())}return()=>l.dispose()},[t,s,e])}let ze=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Wn=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var J=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(J||{}),xt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(xt||{}),Vn=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Vn||{});function zn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ze)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function Gn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Wn)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var ar=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ar||{});function Kn(e,t=0){var r;return e===((r=Ye(e))==null?void 0:r.body)?!1:te(t,{0(){return e.matches(ze)},1(){let s=e;for(;s!==null;){if(s.matches(ze))return!0;s=s.parentElement}return!1}})}var Yn=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Yn||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ee(e){e?.focus({preventScroll:!0})}let Qn=["textarea","input"].join(",");function Xn(e){var t,r;return(r=(t=e?.matches)==null?void 0:t.call(e,Qn))!=null?r:!1}function Zn(e,t=r=>r){return e.slice().sort((r,s)=>{let a=t(r),l=t(s);if(a===null||l===null)return 0;let c=a.compareDocumentPosition(l);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Oe(e,t,{sorted:r=!0,relativeTo:s=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?r?Zn(e):e:t&64?Gn(e):zn(e);a.length>0&&c.length>1&&(c=c.filter(p=>!a.some(b=>b!=null&&"current"in b?b?.current===p:b===p))),s=s??l.activeElement;let i=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),o=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,c.indexOf(s))-1;if(t&4)return Math.max(0,c.indexOf(s))+1;if(t&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=t&32?{preventScroll:!0}:{},f=0,y=c.length,x;do{if(f>=y||f+y<=0)return 0;let p=o+f;if(t&16)p=(p+y)%y;else{if(p<0)return 3;if(p>=y)return 1}x=c[p],x?.focus(m),f+=i}while(x!==l.activeElement);return t&6&&Xn(x)&&x.select(),2}function lr(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Jn(){return/Android/gi.test(window.navigator.userAgent)}function Rt(){return lr()||Jn()}function qe(e,t,r,s){let a=Ne(r);d.useEffect(()=>{if(!e)return;function l(c){a.current(c)}return document.addEventListener(t,l,s),()=>document.removeEventListener(t,l,s)},[e,t,s])}function ir(e,t,r,s){let a=Ne(r);d.useEffect(()=>{if(!e)return;function l(c){a.current(c)}return window.addEventListener(t,l,s),()=>window.removeEventListener(t,l,s)},[e,t,s])}const Bt=30;function es(e,t,r){let s=Ne(r),a=d.useCallback(function(i,o){if(i.defaultPrevented)return;let m=o(i);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let f=function y(x){return typeof x=="function"?y(x()):Array.isArray(x)||x instanceof Set?x:[x]}(t);for(let y of f)if(y!==null&&(y.contains(m)||i.composed&&i.composedPath().includes(y)))return;return!Kn(m,ar.Loose)&&m.tabIndex!==-1&&i.preventDefault(),s.current(i,m)},[s,t]),l=d.useRef(null);qe(e,"pointerdown",i=>{var o,m;Rt()||(l.current=((m=(o=i.composedPath)==null?void 0:o.call(i))==null?void 0:m[0])||i.target)},!0),qe(e,"pointerup",i=>{if(Rt()||!l.current)return;let o=l.current;return l.current=null,a(i,()=>o)},!0);let c=d.useRef({x:0,y:0});qe(e,"touchstart",i=>{c.current.x=i.touches[0].clientX,c.current.y=i.touches[0].clientY},!0),qe(e,"touchend",i=>{let o={x:i.changedTouches[0].clientX,y:i.changedTouches[0].clientY};if(!(Math.abs(o.x-c.current.x)>=Bt||Math.abs(o.y-c.current.y)>=Bt))return a(i,()=>ue(i.target)?i.target:null)},!0),ir(e,"blur",i=>a(i,()=>bn(window.document.activeElement)?window.document.activeElement:null),!0)}function Xe(...e){return d.useMemo(()=>Ye(...e),[...e])}function or(e,t,r,s){let a=Ne(r);d.useEffect(()=>{e=e??window;function l(c){a.current(c)}return e.addEventListener(t,l,s),()=>e.removeEventListener(t,l,s)},[e,t,s])}function ts(e){return d.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function rs(e,t){let r=e(),s=new Set;return{getSnapshot(){return r},subscribe(a){return s.add(a),()=>s.delete(a)},dispatch(a,...l){let c=t[a].call(r,...l);c&&(r=c,s.forEach(i=>i()))}}}function ns(){let e;return{before({doc:t}){var r;let s=t.documentElement,a=(r=t.defaultView)!=null?r:window;e=Math.max(0,a.innerWidth-s.clientWidth)},after({doc:t,d:r}){let s=t.documentElement,a=Math.max(0,s.clientWidth-s.offsetWidth),l=Math.max(0,e-a);r.style(s,"paddingRight",`${l}px`)}}}function ss(){return lr()?{before({doc:e,d:t,meta:r}){function s(a){return r.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let i=re();i.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>i.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,c=null;t.addEventListener(e,"click",i=>{if(ue(i.target))try{let o=i.target.closest("a");if(!o)return;let{hash:m}=new URL(o.href),f=e.querySelector(m);ue(f)&&!s(f)&&(c=f)}catch{}},!0),t.addEventListener(e,"touchstart",i=>{if(ue(i.target)&&yn(i.target))if(s(i.target)){let o=i.target;for(;o.parentElement&&s(o.parentElement);)o=o.parentElement;t.style(o,"overscrollBehavior","contain")}else t.style(i.target,"touchAction","none")}),t.addEventListener(e,"touchmove",i=>{if(ue(i.target)){if(vn(i.target))return;if(s(i.target)){let o=i.target;for(;o.parentElement&&o.dataset.headlessuiPortal!==""&&!(o.scrollHeight>o.clientHeight||o.scrollWidth>o.clientWidth);)o=o.parentElement;o.dataset.headlessuiPortal===""&&i.preventDefault()}else i.preventDefault()}},{passive:!1}),t.add(()=>{var i;let o=(i=window.scrollY)!=null?i:window.pageYOffset;l!==o&&window.scrollTo(0,l),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function as(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function ls(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let be=rs(()=>new Map,{PUSH(e,t){var r;let s=(r=this.get(e))!=null?r:{doc:e,count:0,d:re(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let s={doc:e,d:t,meta:ls(r)},a=[ss(),ns(),as()];a.forEach(({before:l})=>l?.(s)),a.forEach(({after:l})=>l?.(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});be.subscribe(()=>{let e=be.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let s=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!s||!a&&s)&&be.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&be.dispatch("TEARDOWN",r)}});function is(e,t,r=()=>({containers:[]})){let s=ts(be),a=t?s.get(t):void 0,l=a?a.count>0:!1;return O(()=>{if(!(!t||!e))return be.dispatch("PUSH",t,r),()=>be.dispatch("POP",t,r)},[e,t]),l}function os(e,t,r=()=>[document.body]){let s=Le(e,"scroll-lock");is(s,t,a=>{var l;return{containers:[...(l=a.containers)!=null?l:[],r]}})}function cs(e=0){let[t,r]=d.useState(e),s=d.useCallback(o=>r(o),[t]),a=d.useCallback(o=>r(m=>m|o),[t]),l=d.useCallback(o=>(t&o)===o,[t]),c=d.useCallback(o=>r(m=>m&~o),[r]),i=d.useCallback(o=>r(m=>m^o),[r]);return{flags:t,setFlag:s,addFlag:a,hasFlag:l,removeFlag:c,toggleFlag:i}}var ds={},Ht,qt;typeof Ft<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Ht=Ft==null?void 0:ds)==null?void 0:Ht.NODE_ENV)==="test"&&typeof((qt=Element?.prototype)==null?void 0:qt.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var us=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(us||{});function ms(e){let t={};for(let r in e)e[r]===!0&&(t[`data-${r}`]="");return t}function fs(e,t,r,s){let[a,l]=d.useState(r),{hasFlag:c,addFlag:i,removeFlag:o}=cs(e&&a?3:0),m=d.useRef(!1),f=d.useRef(!1),y=jt();return O(()=>{var x;if(e){if(r&&l(!0),!t){r&&i(3);return}return(x=s?.start)==null||x.call(s,r),ps(t,{inFlight:m,prepare(){f.current?f.current=!1:f.current=m.current,m.current=!0,!f.current&&(r?(i(3),o(4)):(i(4),o(2)))},run(){f.current?r?(o(3),i(4)):(o(4),i(3)):r?o(1):i(1)},done(){var p;f.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(m.current=!1,o(7),r||l(!1),(p=s?.end)==null||p.call(s,r))}})}},[e,r,t,y]),e?[a,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function ps(e,{prepare:t,run:r,done:s,inFlight:a}){let l=re();return xs(e,{prepare:t,inFlight:a}),l.nextFrame(()=>{r(),l.requestAnimationFrame(()=>{l.add(hs(e,s))})}),l.dispose}function hs(e,t){var r,s;let a=re();if(!e)return a.dispose;let l=!1;a.add(()=>{l=!0});let c=(s=(r=e.getAnimations)==null?void 0:r.call(e).filter(i=>i instanceof CSSTransition))!=null?s:[];return c.length===0?(t(),a.dispose):(Promise.allSettled(c.map(i=>i.finished)).then(()=>{l||t()}),a.dispose)}function xs(e,{inFlight:t,prepare:r}){if(t!=null&&t.current){r();return}let s=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=s}function Nt(e,t){let r=d.useRef([]),s=F(e);d.useEffect(()=>{let a=[...r.current];for(let[l,c]of t.entries())if(r.current[l]!==c){let i=s(t,a);return r.current=t,i}},[s,...t])}let Ze=d.createContext(null);Ze.displayName="OpenClosedContext";var V=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(V||{});function Je(){return d.useContext(Ze)}function gs({value:e,children:t}){return w.createElement(Ze.Provider,{value:e},t)}function ys({children:e}){return w.createElement(Ze.Provider,{value:null},e)}function bs(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let ce=[];bs(()=>{function e(t){if(!ue(t.target)||t.target===document.body||ce[0]===t.target)return;let r=t.target;r=r.closest(ze),ce.unshift(r??t.target),ce=ce.filter(s=>s!=null&&s.isConnected),ce.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function cr(e){let t=F(e),r=d.useRef(!1);d.useEffect(()=>(r.current=!1,()=>{r.current=!0,Qe(()=>{r.current&&t()})}),[t])}function vs(){let e=typeof document>"u";return"useSyncExternalStore"in At?(t=>t.useSyncExternalStore)(At)(()=>()=>{},()=>!1,()=>!e):!1}function Ie(){let e=vs(),[t,r]=d.useState(ve.isHandoffComplete);return t&&ve.isHandoffComplete===!1&&r(!1),d.useEffect(()=>{t!==!0&&r(!0)},[t]),d.useEffect(()=>ve.handoff(),[]),e?!1:t}let dr=d.createContext(!1);function js(){return d.useContext(dr)}function _t(e){return w.createElement(dr.Provider,{value:e.force},e.children)}function ws(e){let t=js(),r=d.useContext(mr),[s,a]=d.useState(()=>{var l;if(!t&&r!==null)return(l=r.current)!=null?l:null;if(ve.isServer)return null;let c=e?.getElementById("headlessui-portal-root");if(c)return c;if(e===null)return null;let i=e.createElement("div");return i.setAttribute("id","headlessui-portal-root"),e.body.appendChild(i)});return d.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),d.useEffect(()=>{t||r!==null&&a(r.current)},[r,a,t]),s}let ur=d.Fragment,Ns=I(function(e,t){let{ownerDocument:r=null,...s}=e,a=d.useRef(null),l=Q(jn(p=>{a.current=p}),t),c=Xe(a),i=r??c,o=ws(i),[m]=d.useState(()=>{var p;return ve.isServer?null:(p=i?.createElement("div"))!=null?p:null}),f=d.useContext(gt),y=Ie();O(()=>{!o||!m||o.contains(m)||(m.setAttribute("data-headlessui-portal",""),o.appendChild(m))},[o,m]),O(()=>{if(m&&f)return f.register(m)},[f,m]),cr(()=>{var p;!o||!m||(Yt(m)&&o.contains(m)&&o.removeChild(m),o.childNodes.length<=0&&((p=o.parentElement)==null||p.removeChild(o)))});let x=U();return y?!o||!m?null:Fr.createPortal(x({ourProps:{ref:l},theirProps:s,slot:{},defaultTag:ur,name:"Portal"}),m):null});function Cs(e,t){let r=Q(t),{enabled:s=!0,ownerDocument:a,...l}=e,c=U();return s?w.createElement(Ns,{...l,ownerDocument:a,ref:r}):c({ourProps:{ref:r},theirProps:l,slot:{},defaultTag:ur,name:"Portal"})}let ks=d.Fragment,mr=d.createContext(null);function Ss(e,t){let{target:r,...s}=e,a={ref:Q(t)},l=U();return w.createElement(mr.Provider,{value:r},l({ourProps:a,theirProps:s,defaultTag:ks,name:"Popover.Group"}))}let gt=d.createContext(null);function Es(){let e=d.useContext(gt),t=d.useRef([]),r=F(l=>(t.current.push(l),e&&e.register(l),()=>s(l))),s=F(l=>{let c=t.current.indexOf(l);c!==-1&&t.current.splice(c,1),e&&e.unregister(l)}),a=d.useMemo(()=>({register:r,unregister:s,portals:t}),[r,s,t]);return[t,d.useMemo(()=>function({children:l}){return w.createElement(gt.Provider,{value:a},l)},[a])]}let $s=I(Cs),fr=I(Ss),Fs=Object.assign($s,{Group:fr});function As(e,t=typeof document<"u"?document.defaultView:null,r){let s=Le(e,"escape");or(t,"keydown",a=>{s&&(a.defaultPrevented||a.key===Zt.Escape&&r(a))})}function Ts(){var e;let[t]=d.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,s]=d.useState((e=t?.matches)!=null?e:!1);return O(()=>{if(!t)return;function a(l){s(l.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),r}function Ps({defaultContainers:e=[],portals:t,mainTreeNode:r}={}){let s=Xe(r),a=F(()=>{var l,c;let i=[];for(let o of e)o!==null&&(me(o)?i.push(o):"current"in o&&me(o.current)&&i.push(o.current));if(t!=null&&t.current)for(let o of t.current)i.push(o);for(let o of(l=s?.querySelectorAll("html > *, body > *"))!=null?l:[])o!==document.body&&o!==document.head&&me(o)&&o.id!=="headlessui-portal-root"&&(r&&(o.contains(r)||o.contains((c=r?.getRootNode())==null?void 0:c.host))||i.some(m=>o.contains(m))||i.push(o));return i});return{resolveContainers:a,contains:F(l=>a().some(c=>c.contains(l)))}}let pr=d.createContext(null);function Ut({children:e,node:t}){let[r,s]=d.useState(null),a=hr(t??r);return w.createElement(pr.Provider,{value:a},e,a===null&&w.createElement(pt,{features:Ve.Hidden,ref:l=>{var c,i;if(l){for(let o of(i=(c=Ye(l))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?i:[])if(o!==document.body&&o!==document.head&&me(o)&&o!=null&&o.contains(l)){s(o);break}}}}))}function hr(e=null){var t;return(t=d.useContext(pr))!=null?t:e}function Ct(){let e=d.useRef(!1);return O(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Te=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Te||{});function Ds(){let e=d.useRef(0);return ir(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function xr(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)me(r.current)&&t.add(r.current);return t}let Os="div";var ye=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ye||{});function Ms(e,t){let r=d.useRef(null),s=Q(r,t),{initialFocus:a,initialFocusFallback:l,containers:c,features:i=15,...o}=e;Ie()||(i=0);let m=Xe(r);Bs(i,{ownerDocument:m});let f=Hs(i,{ownerDocument:m,container:r,initialFocus:a,initialFocusFallback:l});qs(i,{ownerDocument:m,container:r,containers:c,previousActiveElement:f});let y=Ds(),x=F($=>{if(!we(r.current))return;let C=r.current;(N=>N())(()=>{te(y.current,{[Te.Forwards]:()=>{Oe(C,J.First,{skipElements:[$.relatedTarget,l]})},[Te.Backwards]:()=>{Oe(C,J.Last,{skipElements:[$.relatedTarget,l]})}})})}),p=Le(!!(i&2),"focus-trap#tab-lock"),b=jt(),g=d.useRef(!1),v={ref:s,onKeyDown($){$.key=="Tab"&&(g.current=!0,b.requestAnimationFrame(()=>{g.current=!1}))},onBlur($){if(!(i&4))return;let C=xr(c);we(r.current)&&C.add(r.current);let N=$.relatedTarget;ue(N)&&N.dataset.headlessuiFocusGuard!=="true"&&(gr(C,N)||(g.current?Oe(r.current,te(y.current,{[Te.Forwards]:()=>J.Next,[Te.Backwards]:()=>J.Previous})|J.WrapAround,{relativeTo:$.target}):ue($.target)&&ee($.target)))}},k=U();return w.createElement(w.Fragment,null,p&&w.createElement(pt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Ve.Focusable}),k({ourProps:v,theirProps:o,defaultTag:Os,name:"FocusTrap"}),p&&w.createElement(pt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Ve.Focusable}))}let Ls=I(Ms),Is=Object.assign(Ls,{features:ye});function Rs(e=!0){let t=d.useRef(ce.slice());return Nt(([r],[s])=>{s===!0&&r===!1&&Qe(()=>{t.current.splice(0)}),s===!1&&r===!0&&(t.current=ce.slice())},[e,ce,t]),F(()=>{var r;return(r=t.current.find(s=>s!=null&&s.isConnected))!=null?r:null})}function Bs(e,{ownerDocument:t}){let r=!!(e&8),s=Rs(r);Nt(()=>{r||t?.activeElement===t?.body&&ee(s())},[r]),cr(()=>{r&&ee(s())})}function Hs(e,{ownerDocument:t,container:r,initialFocus:s,initialFocusFallback:a}){let l=d.useRef(null),c=Le(!!(e&1),"focus-trap#initial-focus"),i=Ct();return Nt(()=>{if(e===0)return;if(!c){a!=null&&a.current&&ee(a.current);return}let o=r.current;o&&Qe(()=>{if(!i.current)return;let m=t?.activeElement;if(s!=null&&s.current){if(s?.current===m){l.current=m;return}}else if(o.contains(m)){l.current=m;return}if(s!=null&&s.current)ee(s.current);else{if(e&16){if(Oe(o,J.First|J.AutoFocus)!==xt.Error)return}else if(Oe(o,J.First)!==xt.Error)return;if(a!=null&&a.current&&(ee(a.current),t?.activeElement===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=t?.activeElement})},[a,c,e]),l}function qs(e,{ownerDocument:t,container:r,containers:s,previousActiveElement:a}){let l=Ct(),c=!!(e&4);or(t?.defaultView,"focus",i=>{if(!c||!l.current)return;let o=xr(s);we(r.current)&&o.add(r.current);let m=a.current;if(!m)return;let f=i.target;we(f)?gr(o,f)?(a.current=f,ee(f)):(i.preventDefault(),i.stopPropagation(),ee(m)):ee(a.current)},!0)}function gr(e,t){for(let r of e)if(r.contains(t))return!0;return!1}function yr(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:vr)!==d.Fragment||w.Children.count(e.children)===1}let et=d.createContext(null);et.displayName="TransitionContext";var _s=(e=>(e.Visible="visible",e.Hidden="hidden",e))(_s||{});function Us(){let e=d.useContext(et);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Ws(){let e=d.useContext(tt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let tt=d.createContext(null);tt.displayName="NestingContext";function rt(e){return"children"in e?rt(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function br(e,t){let r=Ne(e),s=d.useRef([]),a=Ct(),l=jt(),c=F((p,b=de.Hidden)=>{let g=s.current.findIndex(({el:v})=>v===p);g!==-1&&(te(b,{[de.Unmount](){s.current.splice(g,1)},[de.Hidden](){s.current[g].state="hidden"}}),l.microTask(()=>{var v;!rt(s)&&a.current&&((v=r.current)==null||v.call(r))}))}),i=F(p=>{let b=s.current.find(({el:g})=>g===p);return b?b.state!=="visible"&&(b.state="visible"):s.current.push({el:p,state:"visible"}),()=>c(p,de.Unmount)}),o=d.useRef([]),m=d.useRef(Promise.resolve()),f=d.useRef({enter:[],leave:[]}),y=F((p,b,g)=>{o.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([v])=>v!==p)),t?.chains.current[b].push([p,new Promise(v=>{o.current.push(v)})]),t?.chains.current[b].push([p,new Promise(v=>{Promise.all(f.current[b].map(([k,$])=>$)).then(()=>v())})]),b==="enter"?m.current=m.current.then(()=>t?.wait.current).then(()=>g(b)):g(b)}),x=F((p,b,g)=>{Promise.all(f.current[b].splice(0).map(([v,k])=>k)).then(()=>{var v;(v=o.current.shift())==null||v()}).then(()=>g(b))});return d.useMemo(()=>({children:s,register:i,unregister:c,onStart:y,onStop:x,wait:m,chains:f}),[i,c,s,y,x,f,m])}let vr=d.Fragment,jr=We.RenderStrategy;function Vs(e,t){var r,s;let{transition:a=!0,beforeEnter:l,afterEnter:c,beforeLeave:i,afterLeave:o,enter:m,enterFrom:f,enterTo:y,entered:x,leave:p,leaveFrom:b,leaveTo:g,...v}=e,[k,$]=d.useState(null),C=d.useRef(null),N=yr(e),T=Q(...N?[C,t,$]:t===null?[]:[t]),P=(r=v.unmount)==null||r?de.Unmount:de.Hidden,{show:E,appear:X,initial:fe}=Us(),[D,z]=d.useState(E?"visible":"hidden"),ne=Ws(),{register:M,unregister:G}=ne;O(()=>M(C),[M,C]),O(()=>{if(P===de.Hidden&&C.current){if(E&&D!=="visible"){z("visible");return}return te(D,{hidden:()=>G(C),visible:()=>M(C)})}},[D,C,M,G,E,P]);let pe=Ie();O(()=>{if(N&&pe&&D==="visible"&&C.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[C,D,pe,N]);let se=fe&&!X,Ce=X&&E&&fe,ae=d.useRef(!1),Z=br(()=>{ae.current||(z("hidden"),G(C))},ne),ke=F(ie=>{ae.current=!0;let H=ie?"enter":"leave";Z.onStart(C,H,xe=>{xe==="enter"?l?.():xe==="leave"&&i?.()})}),W=F(ie=>{let H=ie?"enter":"leave";ae.current=!1,Z.onStop(C,H,xe=>{xe==="enter"?c?.():xe==="leave"&&o?.()}),H==="leave"&&!rt(Z)&&(z("hidden"),G(C))});d.useEffect(()=>{N&&a||(ke(E),W(E))},[E,N,a]);let $e=!(!a||!N||!pe||se),[,S]=fs($e,k,E,{start:ke,end:W}),Se=ge({ref:T,className:((s=ft(v.className,Ce&&m,Ce&&f,S.enter&&m,S.enter&&S.closed&&f,S.enter&&!S.closed&&y,S.leave&&p,S.leave&&!S.closed&&b,S.leave&&S.closed&&g,!S.transition&&E&&x))==null?void 0:s.trim())||void 0,...ms(S)}),le=0;D==="visible"&&(le|=V.Open),D==="hidden"&&(le|=V.Closed),E&&D==="hidden"&&(le|=V.Opening),!E&&D==="visible"&&(le|=V.Closing);let he=U();return w.createElement(tt.Provider,{value:Z},w.createElement(gs,{value:le},he({ourProps:Se,theirProps:v,defaultTag:vr,features:jr,visible:D==="visible",name:"Transition.Child"})))}function zs(e,t){let{show:r,appear:s=!1,unmount:a=!0,...l}=e,c=d.useRef(null),i=yr(e),o=Q(...i?[c,t]:t===null?[]:[t]);Ie();let m=Je();if(r===void 0&&m!==null&&(r=(m&V.Open)===V.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,y]=d.useState(r?"visible":"hidden"),x=br(()=>{r||y("hidden")}),[p,b]=d.useState(!0),g=d.useRef([r]);O(()=>{p!==!1&&g.current[g.current.length-1]!==r&&(g.current.push(r),b(!1))},[g,r]);let v=d.useMemo(()=>({show:r,appear:s,initial:p}),[r,s,p]);O(()=>{r?y("visible"):!rt(x)&&c.current!==null&&y("hidden")},[r,x]);let k={unmount:a},$=F(()=>{var T;p&&b(!1),(T=e.beforeEnter)==null||T.call(e)}),C=F(()=>{var T;p&&b(!1),(T=e.beforeLeave)==null||T.call(e)}),N=U();return w.createElement(tt.Provider,{value:x},w.createElement(et.Provider,{value:v},N({ourProps:{...k,as:d.Fragment,children:w.createElement(wr,{ref:o,...k,...l,beforeEnter:$,beforeLeave:C})},theirProps:{},defaultTag:d.Fragment,features:jr,visible:f==="visible",name:"Transition"})))}function Gs(e,t){let r=d.useContext(et)!==null,s=Je()!==null;return w.createElement(w.Fragment,null,!r&&s?w.createElement(yt,{ref:t,...e}):w.createElement(wr,{ref:t,...e}))}let yt=I(zs),wr=I(Vs),kt=I(Gs),je=Object.assign(yt,{Child:kt,Root:yt});var Ks=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ks||{}),Ys=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Ys||{});let Qs={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},St=d.createContext(null);St.displayName="DialogContext";function nt(e){let t=d.useContext(St);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,nt),r}return t}function Xs(e,t){return te(t.type,Qs,e,t)}let Wt=I(function(e,t){let r=d.useId(),{id:s=`headlessui-dialog-${r}`,open:a,onClose:l,initialFocus:c,role:i="dialog",autoFocus:o=!0,__demoMode:m=!1,unmount:f=!1,...y}=e,x=d.useRef(!1);i=function(){return i==="dialog"||i==="alertdialog"?i:(x.current||(x.current=!0,console.warn(`Invalid role [${i}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let p=Je();a===void 0&&p!==null&&(a=(p&V.Open)===V.Open);let b=d.useRef(null),g=Q(b,t),v=Xe(b),k=a?0:1,[$,C]=d.useReducer(Xs,{titleId:null,descriptionId:null,panelRef:d.createRef()}),N=F(()=>l(!1)),T=F(S=>C({type:0,id:S})),P=Ie()?k===0:!1,[E,X]=Es(),fe={get current(){var S;return(S=$.panelRef.current)!=null?S:b.current}},D=hr(),{resolveContainers:z}=Ps({mainTreeNode:D,portals:E,defaultContainers:[fe]}),ne=p!==null?(p&V.Closing)===V.Closing:!1;_n(m||ne?!1:P,{allowed:F(()=>{var S,Se;return[(Se=(S=b.current)==null?void 0:S.closest("[data-headlessui-portal]"))!=null?Se:null]}),disallowed:F(()=>{var S;return[(S=D?.closest("body > *:not(#headlessui-portal-root)"))!=null?S:null]})});let M=nr.get(null);O(()=>{if(P)return M.actions.push(s),()=>M.actions.pop(s)},[M,s,P]);let G=sr(M,d.useCallback(S=>M.selectors.isTop(S,s),[M,s]));es(G,z,S=>{S.preventDefault(),N()}),As(G,v?.defaultView,S=>{S.preventDefault(),S.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),N()}),os(m||ne?!1:P,v,z),Un(P,b,N);let[pe,se]=wn(),Ce=d.useMemo(()=>[{dialogState:k,close:N,setTitleId:T,unmount:f},$],[k,$,N,T,f]),ae=d.useMemo(()=>({open:k===0}),[k]),Z={ref:g,id:s,role:i,tabIndex:-1,"aria-modal":m?void 0:k===0?!0:void 0,"aria-labelledby":$.titleId,"aria-describedby":pe,unmount:f},ke=!Ts(),W=ye.None;P&&!m&&(W|=ye.RestoreFocus,W|=ye.TabLock,o&&(W|=ye.AutoFocus),ke&&(W|=ye.InitialFocus));let $e=U();return w.createElement(ys,null,w.createElement(_t,{force:!0},w.createElement(Fs,null,w.createElement(St.Provider,{value:Ce},w.createElement(fr,{target:b},w.createElement(_t,{force:!1},w.createElement(se,{slot:ae},w.createElement(X,null,w.createElement(Is,{initialFocus:c,initialFocusFallback:b,containers:z,features:W},w.createElement($n,{value:N},$e({ourProps:Z,theirProps:y,slot:ae,defaultTag:Zs,features:Js,visible:k===0,name:"Dialog"})))))))))))}),Zs="div",Js=We.RenderStrategy|We.Static;function ea(e,t){let{transition:r=!1,open:s,...a}=e,l=Je(),c=e.hasOwnProperty("open")||l!==null,i=e.hasOwnProperty("onClose");if(!c&&!i)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!i)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||r)&&!a.static?w.createElement(Ut,null,w.createElement(je,{show:s,transition:r,unmount:a.unmount},w.createElement(Wt,{ref:t,...a}))):w.createElement(Ut,null,w.createElement(Wt,{ref:t,open:s,...a}))}let ta="div";function ra(e,t){let r=d.useId(),{id:s=`headlessui-dialog-panel-${r}`,transition:a=!1,...l}=e,[{dialogState:c,unmount:i},o]=nt("Dialog.Panel"),m=Q(t,o.panelRef),f=d.useMemo(()=>({open:c===0}),[c]),y=F(v=>{v.stopPropagation()}),x={ref:m,id:s,onClick:y},p=a?kt:d.Fragment,b=a?{unmount:i}:{},g=U();return w.createElement(p,{...b},g({ourProps:x,theirProps:l,slot:f,defaultTag:ta,name:"Dialog.Panel"}))}let na="div";function sa(e,t){let{transition:r=!1,...s}=e,[{dialogState:a,unmount:l}]=nt("Dialog.Backdrop"),c=d.useMemo(()=>({open:a===0}),[a]),i={ref:t,"aria-hidden":!0},o=r?kt:d.Fragment,m=r?{unmount:l}:{},f=U();return w.createElement(o,{...m},f({ourProps:i,theirProps:s,slot:c,defaultTag:na,name:"Dialog.Backdrop"}))}let aa="h2";function la(e,t){let r=d.useId(),{id:s=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:l,setTitleId:c}]=nt("Dialog.Title"),i=Q(t);d.useEffect(()=>(c(s),()=>c(null)),[s,c]);let o=d.useMemo(()=>({open:l===0}),[l]),m={ref:i,id:s};return U()({ourProps:m,theirProps:a,slot:o,defaultTag:aa,name:"Dialog.Title"})}let ia=I(ea),oa=I(ra);I(sa);let ca=I(la),Ee=Object.assign(ia,{Panel:oa,Title:ca,Description:Sn});function da({isOpen:e,onClose:t}){const r=Ke(),s=vt(),a=oe(r.createBookingAdmin.mutationOptions()),l=async c=>{c.preventDefault();const i=new FormData(c.currentTarget);try{await a.mutateAsync({clientEmail:i.get("clientEmail"),clientFirstName:i.get("clientFirstName"),clientLastName:i.get("clientLastName"),clientPhone:i.get("clientPhone"),serviceType:i.get("serviceType"),scheduledDate:new Date(i.get("scheduledDate")).toISOString(),scheduledTime:i.get("scheduledTime"),address:i.get("address"),durationHours:Number(i.get("durationHours"))||2,finalPrice:Number(i.get("finalPrice"))||0,status:"CONFIRMED",paymentMethod:"CREDIT_CARD"}),Ue.success("Booking created"),s.invalidateQueries(r.getAllBookingsAdmin.queryOptions({},{enabled:!0}).queryKey),t()}catch(o){Ue.error(o.message||"Failed to create booking")}};return n.jsx(je,{appear:!0,show:e,as:d.Fragment,children:n.jsxs(Ee,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(je.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/25"})}),n.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:n.jsx(je.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsxs(Ee.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(Ee.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"New Admin Booking"}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:n.jsx(Me,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:l,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Client Details"})}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),n.jsx("input",{required:!0,type:"email",name:"clientEmail",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),n.jsx("input",{required:!0,type:"tel",name:"clientPhone",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),n.jsx("input",{required:!0,type:"text",name:"clientFirstName",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),n.jsx("input",{required:!0,type:"text",name:"clientLastName",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Booking Details"})}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),n.jsx("input",{required:!0,type:"text",name:"address",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Service Type"}),n.jsxs("select",{name:"serviceType",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm",children:[n.jsx("option",{value:"Standard Home Cleaning",children:"Standard Home Cleaning"}),n.jsx("option",{value:"Deep Home Cleaning",children:"Deep Home Cleaning"}),n.jsx("option",{value:"Move-In/Out Cleaning",children:"Move-In/Out Cleaning"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($)"}),n.jsx("input",{required:!0,type:"number",step:"0.01",name:"finalPrice",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),n.jsx("input",{required:!0,type:"date",name:"scheduledDate",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time"}),n.jsx("input",{required:!0,type:"time",name:"scheduledTime",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hours"}),n.jsx("input",{required:!0,type:"number",step:"0.5",name:"durationHours",defaultValue:"2",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2 border sm:text-sm"})]})]}),n.jsxs("div",{className:"md:col-span-2 mt-6 flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:a.isPending,className:"flex items-center justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50",children:[a.isPending?n.jsx(Gt,{className:"w-4 h-4 animate-spin mr-2"}):null,"Create Booking"]})]})]})]})})})})]})})}function ua(){const e=Ke(),t=Pe({...e.getActiveTimeEntries.queryOptions(),refetchInterval:3e4}),r=t.data||[];return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden flex flex-col h-full max-h-[600px]",children:[n.jsxs("div",{className:"p-4 bg-gradient-to-r from-primary/5 to-transparent border-b border-gray-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(rn,{className:"w-5 h-5 text-primary animate-pulse"}),n.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full border border-white"})]}),n.jsx("h3",{className:"font-bold text-gray-900 font-heading tracking-tight",children:"Live Status Tracker"})]}),n.jsxs("span",{className:"text-[10px] font-bold bg-primary/10 text-primary px-2 py-0.5 rounded-full uppercase",children:[r.length," Active"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-200",children:t.isLoading?[1,2,3].map(s=>n.jsxs("div",{className:"animate-pulse flex gap-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]},s)):r.length===0?n.jsxs("div",{className:"text-center py-12 px-4",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-100 italic",children:n.jsx(Wr,{className:"w-8 h-8 text-gray-300"})}),n.jsx("p",{className:"text-gray-900 font-semibold mb-1",children:"No Active Cleaners"}),n.jsx("p",{className:"text-gray-500 text-xs",children:"All cleaners are currently punched out."})]}):r.map(s=>n.jsxs("div",{className:"group p-3 bg-white border border-gray-100 rounded-xl hover:shadow-md hover:border-primary/20 transition-all duration-300 cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center border border-primary/5 group-hover:scale-110 transition-transform",children:n.jsx(Ar,{className:"w-5 h-5 text-primary"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm font-bold text-gray-900 truncate",children:[s.user.firstName," ",s.user.lastName]}),n.jsxs("p",{className:"text-[10px] text-gray-500 font-medium",children:["Clocked in at ",Ur(new Date(s.startTime||Date.now()).toTimeString().split(" ")[0])]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2 text-[11px] bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsx(Vr,{className:"w-3.5 h-3.5 text-blue-500 mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-gray-600 font-semibold",children:"Active Booking"}),n.jsx("p",{className:"text-gray-900 truncate",children:s.booking?.serviceType||"Unassigned"})]})]}),n.jsxs("div",{className:"flex items-start gap-2 text-[11px] bg-green-50/50 p-2 rounded-lg border border-green-100/50",children:[n.jsx(zr,{className:"w-3.5 h-3.5 text-green-600 mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-green-700 font-semibold",children:"Location"}),n.jsx("p",{className:"text-gray-900 truncate",children:s.booking?.address||"On the move"}),s.lat&&s.lng&&n.jsxs("a",{href:`https://www.google.com/maps?q=${s.lat},${s.lng}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary hover:underline mt-1 font-bold",children:[n.jsx(en,{className:"w-3 h-3"})," View Map"]})]})]})]})]},s.id))}),n.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-100 text-center",children:n.jsx("p",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-widest",children:"Live Updates Active"})})]})}function ma({isOpen:e,onClose:t,bookingId:r,currentCleanerIds:s}){const a=Ke(),l=vt(),[c,i]=d.useState(s),[o,m]=d.useState(""),f=Pe(a.getAllUsersAdmin.queryOptions({role:"CLEANER"})),y=oe(a.assignCleaners.mutationOptions()),x=f.data?.users.filter(g=>g.firstName?.toLowerCase().includes(o.toLowerCase())||g.lastName?.toLowerCase().includes(o.toLowerCase())||g.email.toLowerCase().includes(o.toLowerCase()))||[],p=g=>{i(v=>v.includes(g)?v.filter(k=>k!==g):[...v,g])},b=async()=>{if(r)try{await y.mutateAsync({bookingId:r,cleanerIds:c,status:"CONFIRMED"}),Ue.success("Cleaners assigned and booking confirmed"),l.invalidateQueries(a.getAllBookingsAdmin.queryOptions({},{enabled:!0}).queryKey),t()}catch(g){Ue.error(g.message||"Failed to assign cleaners")}};return n.jsx(je,{appear:!0,show:e,as:d.Fragment,children:n.jsxs(Ee,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(je.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),n.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:n.jsx(je.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsxs(Ee.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all border border-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx(Ee.Title,{as:"h3",className:"text-xl font-bold text-[#0f172a]",children:"Assign Cleaners"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select cleaners for this job"})]}),n.jsx("button",{onClick:t,className:"rounded-full p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 transition-colors",children:n.jsx(Me,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"relative mb-4",children:[n.jsx(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search cleaners...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#163022]/20 focus:border-[#163022]",value:o,onChange:g=>m(g.target.value)})]}),n.jsx("div",{className:"max-h-[300px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:f.isLoading?n.jsx("div",{className:"py-12 text-center text-sm text-gray-400 italic",children:"Loading cleaners..."}):x.length===0?n.jsx("div",{className:"py-12 text-center text-sm text-gray-400 italic",children:"No cleaners found."}):x.map(g=>n.jsxs("button",{onClick:()=>p(g.id),className:`w-full flex items-center justify-between p-3 rounded-xl border transition-all ${c.includes(g.id)?"bg-[#163022]/5 border-[#163022] shadow-sm":"bg-white border-gray-100 hover:border-gray-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:g.color||"#163022"},children:[g.firstName?.[0],g.lastName?.[0]]}),n.jsxs("div",{className:"text-left",children:[n.jsxs("div",{className:"text-sm font-bold text-[#0f172a]",children:[g.firstName," ",g.lastName]}),n.jsx("div",{className:"text-xs text-gray-500",children:g.email})]})]}),c.includes(g.id)&&n.jsx("div",{className:"h-6 w-6 rounded-full bg-[#163022] flex items-center justify-center",children:n.jsx(Pr,{className:"h-3.5 w-3.5 text-white"})})]},g.id))}),n.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 text-sm font-bold text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"button",onClick:b,disabled:y.isPending||c.length===0,className:"flex items-center justify-center rounded-xl bg-[#163022] px-6 py-2.5 text-sm font-bold text-white shadow-lg hover:bg-[#0f241a] transition-all disabled:opacity-50 active:scale-[0.98]",children:[y.isPending?n.jsx(Gt,{className:"w-4 h-4 animate-spin mr-2"}):null,"Confirm Assignment"]})]})]})})})})]})})}function fa(){const e=new Date;return e.setDate(e.getDate()-e.getDay()),Array.from({length:7}).map((t,r)=>{const s=new Date(e);return s.setDate(e.getDate()+r),s})}function pa(){return[new Date]}function Vt(){const e=[];for(let t=6;t<=21;t++){const r=t>=12?"PM":"AM",s=(t+11)%12+1;e.push(`${s}:00 ${r} `)}return e}function bt(e){const t=Math.round(e*60),r=Math.floor(t/60),s=t%60;return r>0&&s>0?`${r}h ${s} m`:r>0?`${r} h`:`${s} m`}function ha(e){if(!e)return 0;const[t,r]=e.split(" ");if(!t)return 0;const[s,a]=t.split(":");let l=Number(s);const c=Number(a||0);r?.toLowerCase()==="pm"&&l!==12&&(l+=12),r?.toLowerCase()==="am"&&l===12&&(l=0);const i=6*60;return Math.max(0,l*60+c-i)}async function xa(e,t,r,s,a){const l={edit:"Open Booking Editor",cancel:"Cancel Booking","add-card-link":"Send Setup Link","resend-receipt":"Resend Receipt","send-invoice":"Send Invoice","time-log":"View Time Log","payment-log":"View Payment Log",refund:"Refund Booking","retry-payment":"Retry Payment",assign:"Assign Cleaner(s)"},c={edit:`Would you like to open the full editor for ${t.customer} ? `,cancel:"Cancel booking? You can choose all or single in the next step.","add-card-link":`Send a secure link to ${t.customer} to add or update their payment method ? `,"resend-receipt":`Would you like to resend the latest receipt to ${t.customer}?`,"send-invoice":`Would you like to send a manual invoice to ${t.customer}?`,"time-log":`View clock -in/out history and duration logs for ${t.customer}?`,"payment-log":`View detailed transaction logs and Stripe events for ${t.customer}?`,refund:`Are you sure you want to refund the payment for ${t.customer}?`,"retry-payment":`Attempt to process the pending payment for ${t.customer} again?`,assign:"Assigned cleaner(s) to this booking?"};if(e!=="cancel"){if(a){a({open:!0,title:l[e],description:c[e],variant:e==="refund"?"warning":"info",onConfirm:async()=>{try{const i=Number(t.id),o=t.paymentIntentId||(Number.isFinite(i)?String(i):void 0);if(e==="refund"){const m=window.prompt("Refund reason?")||void 0;if(r?.refund)await r.refund.mutateAsync({paymentIntentId:o||String(i),reason:m});else throw new Error("Refund handler unavailable");L.success("Refund processed");return}if(e==="retry-payment"){if(r?.capture)await r.capture.mutateAsync({paymentIntentId:o||String(i)});else throw new Error("Retry handler unavailable");L.success("Retrying payment");return}if(e==="add-card-link"){if(r?.setupIntent)await r.setupIntent.mutateAsync({bookingId:i});else throw new Error("Setup intent handler unavailable");L.success("Add-card link sent");return}if(e==="resend-receipt"){if(r?.receipt)await r.receipt.mutateAsync({bookingId:i});else throw new Error("Receipt handler unavailable");L.success("Receipt resent");return}if(e==="send-invoice"){if(r?.invoice)await r.invoice.mutateAsync({bookingId:i});else throw new Error("Invoice handler unavailable");L.success("Invoice sent");return}if(e==="edit"){L("Opening editor (Coming Soon)",{icon:"🛠️"});return}if(e==="time-log"||e==="payment-log"){L(`Viewing ${e} (Coming Soon)`,{icon:"📋"});return}L.success(`${e} action processed for ${t.customer}`)}catch(i){console.error(i),L.error(i?.message||"Action failed")}}});return}else if(!window.confirm(c[e]))return}}function zt(e,t){e.dataTransfer.setData("text/plain",t)}function ga({booking:e,onClose:t,onMove:r,onAction:s,actionPrefs:a,setActionPrefs:l}){return e?n.jsx("div",{className:"fixed inset-0 z-40 flex justify-end bg-black/30 animate-in fade-in duration-300",children:n.jsxs("div",{className:"h-full w-full max-w-[420px] overflow-y-auto border-l border-gray-200 bg-white p-5 shadow-2xl animate-in slide-in-from-right duration-300",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold text-[#0f172a]",children:"Booking Summary"}),n.jsx("div",{className:"text-xs text-gray-500",children:e.customer})]}),n.jsx("button",{className:"text-sm text-gray-500",onClick:t,children:"Close"})]}),n.jsxs("div",{className:"space-y-3 text-sm text-gray-800",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 rounded-xl bg-[#f9fafb] p-3",children:[n.jsx(B,{label:"Service",children:e.serviceType}),n.jsx(B,{label:"Frequency",children:"Every Other Week"}),n.jsx(B,{label:"Length",children:bt(e.durationHours||2)}),n.jsxs(B,{label:"Service date",children:[e.scheduledDate,", ",e.scheduledTime]}),n.jsx(B,{label:"Assigned to",children:e.provider}),e.cleaners&&e.cleaners.length>0&&n.jsx(B,{label:"Cleaner(s)",children:n.jsx("div",{className:"flex flex-wrap gap-1 justify-end",children:e.cleaners.map(c=>n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-1 text-[11px] font-semibold",style:{backgroundColor:`${c.color}15`,color:c.color},children:[n.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:c.color}}),c.name]},c.name))})}),n.jsx(B,{label:"Location",children:e.location}),n.jsx(B,{label:"Payment method",children:n.jsx("span",{className:"rounded-md bg-green-100 px-2 py-1 text-xs font-semibold text-green-700",children:"CC"})}),n.jsx(B,{label:"Payment status",children:n.jsx("span",{className:`rounded-md px-2 py-1 text-xs font-semibold ${e.paymentStatus==="paid"?"bg-green-100 text-green-700":e.paymentStatus==="pending"?"bg-amber-100 text-amber-700":e.paymentStatus==="declined"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:e.paymentStatus})}),n.jsxs(B,{label:"Price details",children:["$",e.price.toFixed(2)]})]}),n.jsxs("div",{className:"rounded-xl border border-gray-100 bg-[#f9fafb] p-3",children:[n.jsx("div",{className:"text-sm font-semibold text-[#0f172a]",children:"Payment Summary"}),n.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[n.jsxs(B,{label:"Service Total",children:["$",e.price.toFixed(2)]}),n.jsxs(B,{label:"Discounted Total",children:["$",e.price.toFixed(2)]}),n.jsxs(B,{label:"TOTAL",children:["$",e.price.toFixed(2)]})]})]}),n.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-3 space-y-2",children:[n.jsx("div",{className:"text-sm font-semibold text-[#0f172a]",children:"Actions"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(K,{label:"Edit",color:"bg-blue-600 text-white",onClick:()=>s("edit")}),n.jsx(K,{label:"Cancel",color:"bg-red-500 text-white",onClick:()=>s("cancel")}),e.status==="PENDING"&&n.jsx(K,{label:"Assign Cleaner",color:"bg-[#163022] text-white col-span-2",onClick:()=>s("assign")}),n.jsx(K,{label:"Send “Add card” link",color:"bg-pink-100 text-pink-700 border border-pink-200",onClick:()=>s("add-card-link")}),n.jsx(K,{label:"Resend Receipt",color:"bg-blue-100 text-blue-700 border border-blue-200",onClick:()=>s("resend-receipt")}),n.jsx(K,{label:"Send Invoice",color:"bg-indigo-100 text-indigo-700 border border-indigo-200",onClick:()=>s("send-invoice")}),n.jsx(K,{label:"View Time Log",color:"bg-orange-100 text-orange-700 border border-orange-200",onClick:()=>s("time-log")}),n.jsx(K,{label:"View Payment Log",color:"bg-sky-100 text-sky-700 border border-sky-200",onClick:()=>s("payment-log")}),n.jsx(K,{label:"Refund",color:"bg-emerald-100 text-emerald-700 border border-emerald-200",onClick:()=>s("refund")}),n.jsx(K,{label:"Retry Payment",color:"bg-amber-100 text-amber-700 border border-amber-200",onClick:()=>s("retry-payment")})]}),n.jsxs("div",{className:"space-y-2 rounded-lg bg-[#f9fafb] p-3 text-xs text-gray-700",children:[n.jsx("div",{className:"font-semibold text-[#0f172a]",children:"Notifications"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:a.notifyEmail,onChange:c=>l(i=>({...i,notifyEmail:c.target.checked}))}),n.jsx("span",{children:"Email client on cancellation"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:a.notifySms,onChange:c=>l(i=>({...i,notifySms:c.target.checked}))}),n.jsx("span",{children:"SMS client on cancellation"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:a.cancellationFeeApplied,onChange:c=>l(i=>({...i,cancellationFeeApplied:c.target.checked,cancellationFeeAmount:c.target.checked?i.cancellationFeeAmount??0:void 0}))}),n.jsx("span",{children:"Apply cancellation fee"})]}),a.cancellationFeeApplied&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"Fee Amount:"}),n.jsx("input",{type:"number",className:"w-24 rounded-md border border-gray-200 px-2 py-1 text-xs",value:a.cancellationFeeAmount??"",onChange:c=>l(i=>({...i,cancellationFeeAmount:Number(c.target.value)||0}))})]})]})]}),n.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-3 space-y-2",children:[n.jsx("div",{className:"text-sm font-semibold text-[#0f172a]",children:"Notes"}),n.jsx("textarea",{className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm",placeholder:"Private booking note..."}),n.jsx("textarea",{className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm",placeholder:"Private customer note..."}),n.jsx("textarea",{className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm",placeholder:"Note for service provider..."})]})]})]})}):null}function ya({bookings:e,onSelect:t}){return n.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm h-full flex flex-col",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-[#0f172a]",children:"Marketplace"}),n.jsxs("div",{className:"text-xs text-gray-500",children:[e.length," unassigned"]})]}),n.jsx("div",{className:"rounded-full bg-amber-100 p-2 text-amber-600",children:n.jsx(Gr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 custom-scrollbar",children:e.length===0?n.jsxs("div",{className:"py-12 text-center",children:[n.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-gray-50 text-gray-400",children:n.jsx(Kr,{className:"h-6 w-6"})}),n.jsx("p",{className:"mt-2 text-sm text-gray-500 italic",children:"All caught up!"})]}):e.map(r=>n.jsxs("button",{onClick:()=>t(r),className:"w-full rounded-xl border border-gray-100 bg-gray-50 p-3 text-left transition-all hover:border-[#163022] hover:bg-white hover:shadow-md group",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-[#163022]",children:r.scheduledDate}),n.jsx("span",{className:"text-[10px] font-semibold text-gray-500",children:r.scheduledTime})]}),n.jsx("div",{className:"mt-1 font-bold text-[#0f172a] truncate",children:r.customer}),n.jsx("div",{className:"text-[11px] text-gray-500 truncate",children:r.serviceType}),n.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs font-bold text-[#163022]",children:["$",r.price]}),n.jsx("span",{className:"rounded-full border border-amber-200 bg-amber-50 px-2 py-0.5 text-[9px] font-bold text-amber-700",children:"Assigning..."})]})]},r.id))})]})}function B({label:e,children:t}){return n.jsxs("div",{className:"flex items-start justify-between gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:e}),n.jsx("span",{className:"font-semibold text-[#0f172a] text-right",children:t})]})}function K({label:e,color:t,onClick:r}){return n.jsx("button",{onClick:r,className:`rounded-lg px-3 py-2 text-sm font-semibold ${t} shadow-sm`,children:e})}function ba({row:e,onAction:t}){return e.type==="pending"?n.jsx("button",{onClick:()=>t("charge",e),className:"rounded-lg bg-[#163022] px-3 py-1.5 text-xs font-semibold text-white shadow",children:"Charge"}):e.type==="hold"?n.jsx("button",{onClick:()=>t("precharge",e),className:"rounded-lg bg-[#163022] px-3 py-1.5 text-xs font-semibold text-white shadow",children:"Pre-Charge"}):e.type==="declined"?n.jsx("button",{onClick:()=>t("retry",e),className:"rounded-lg bg-[#163022] px-3 py-1.5 text-xs font-semibold text-white shadow",children:"Retry Payment"}):n.jsx("button",{onClick:()=>t("refund",e),className:"rounded-lg bg-[#f97316] px-3 py-1.5 text-xs font-semibold text-white shadow",children:"Refund"})}const La=function(){const[t,r]=d.useState([]),[s,a]=d.useState([]),[l,c]=d.useState(null),[i,o]=d.useState("ALL"),[m,f]=d.useState("pending"),[y,x]=d.useState(""),[p,b]=d.useState(""),[g,v]=d.useState(""),[k,$]=d.useState(""),[C,N]=d.useState("month"),[T,P]=d.useState(null),E=Ke(),X=oe(E.updateBookingAdmin.mutationOptions()),fe=oe(E.sendBookingReceipt.mutationOptions()),D=oe(E.sendBookingInvoice.mutationOptions()),z=oe(E.stripe.createSetupIntent.mutationOptions()),ne=oe(E.stripe.capturePayment.mutationOptions()),M=oe(E.stripe.refundPayment.mutationOptions()),[G,pe]=d.useState({notifyEmail:!0,notifySms:!1,cancellationFeeApplied:!1,cancellationFeeAmount:void 0}),[se,Ce]=d.useState(!1),[ae,Z]=d.useState(!1),[ke,W]=d.useState(!1),[$e,S]=d.useState(!1),[Se,le]=d.useState(!1),[he,ie]=d.useState({open:!1,title:"",description:"",onConfirm:async()=>{}}),[H,xe]=d.useState(null),Re=vt(),st=Pe(E.getAllBookingsAdmin.queryOptions({},{enabled:!0})),at=Pe(E.payments.listCharges.queryOptions(void 0,{enabled:!0})),lt=Pe(E.payments.listHolds.queryOptions(void 0,{enabled:!0}));d.useEffect(()=>{st.data?.bookings?r(st.data.bookings.map(u=>({id:u.id.toString(),customer:`${u.client?.firstName??""} ${u.client?.lastName??""} `.trim()||u.client?.email||"Client",contact:u.client?.phone||u.client?.email||"",serviceType:u.serviceType,scheduledDate:new Date(u.scheduledDate).toISOString().slice(0,10),scheduledTime:u.scheduledTime,provider:`${u.cleaner?.firstName??""} ${u.cleaner?.lastName??""} `.trim()||(u.status==="PENDING"?"UNASSIGNED":"Cleaner"),providerColor:u.cleaner?.color||(u.status==="PENDING"?"#64748b":"#163022"),status:u.status,location:u.address,price:u.finalPrice||0,paymentStatus:u.stripePayments?.[0]?.status||"pending",durationHours:u.durationHours||void 0,paymentIntentId:u.paymentIntentId,cleaners:u.cleaners?.map(h=>({name:`${h.cleaner?.firstName??""} ${h.cleaner?.lastName??""} `.trim(),color:h.cleaner?.color||"#163022"}))}))):Ir().then(r)},[st.data]),d.useEffect(()=>{if(at.data||lt.data){const u=[];(lt.data??[]).forEach(h=>u.push({id:h.id,type:"hold",serviceDate:h.created?new Date(h.created).toISOString().slice(0,10):"",serviceTime:"",customer:{name:"",email:"",phone:""},bookingId:h.bookingId||"",cleaner:"",location:"",amount:h.amount,paymentMethod:h.paymentMethod||"",status:h.status,paymentIntentId:h.paymentIntentId})),(at.data??[]).forEach(h=>u.push({id:h.id,type:"paid",serviceDate:h.created?new Date(h.created).toISOString().slice(0,10):"",serviceTime:"",customer:{name:"",email:"",phone:""},bookingId:h.bookingId||"",cleaner:"",location:"",amount:h.amount,paymentMethod:h.paymentMethod||"",status:h.status,paymentIntentId:h.paymentIntentId})),a(u)}else Rr().then(a)},[at.data,lt.data]);const Nr=d.useMemo(()=>Array.from(new Set(t.map(u=>u.provider))),[t]),Et=d.useMemo(()=>t.filter(u=>{if(!(i==="ALL"||u.provider===i))return!1;const A=y.toLowerCase();return(u.customer.toLowerCase().includes(A)||u.contact.toLowerCase().includes(A)||u.location.toLowerCase().includes(A))&&u.status!=="CANCELLED"}),[t,i,y]),Cr=d.useMemo(()=>{const u=new Date,h=new Date(u.getFullYear(),u.getMonth(),1),A=new Date(h);A.setDate(h.getDate()-h.getDay());const j=new Date(u.getFullYear(),u.getMonth()+1,0),R=new Date(j);R.setDate(j.getDate()+6);const Be=[],q=new Date(A);for(;q<=R;)Be.push(new Date(q)),q.setDate(q.getDate()+1);return Be},[]),kr=d.useMemo(()=>{let u=s;if(m==="pending"&&(u=s.filter(h=>h.type==="pending")),m==="holds"&&(u=s.filter(h=>h.type==="hold")),m==="declined"&&(u=s.filter(h=>h.type==="declined")),g&&(u=u.filter(h=>h.serviceDate>=g)),k&&(u=u.filter(h=>h.serviceDate<=k)),p){const h=p.toLowerCase();u=u.filter(A=>A.customer.name.toLowerCase().includes(h)||A.customer.email.toLowerCase().includes(h)||A.customer.phone.toLowerCase().includes(h)||A.location.toLowerCase().includes(h))}return u},[s,m,g,k,p]),Sr=async(u,h,A="single")=>{try{await X.mutateAsync({bookingId:Number(u),scheduledDate:new Date(h).toISOString(),scope:A}),L.success(`Booking moved to ${h} `),Re.invalidateQueries(E.getAllBookingsAdmin.queryOptions({},{enabled:!0}).queryKey)}catch(j){L.error(j.message||"Failed to move booking")}},$t=(u,h)=>{const A=t.find(j=>j.id===u);A&&(xe({id:u,date:h,isRecurring:!!A.serviceType&&A.serviceType!=="ONE_TIME"}),W(!0))},Er=async(u,h)=>{const A={charge:"Capture Payment",precharge:"Authorize Payment",retry:"Retry Payment",refund:"Refund Payment"},j={charge:`Are you sure you want to capture the remaining $${h.amount.toFixed(2)} for ${h.customer.name} ? `,precharge:`Authorize a card hold of $${h.amount.toFixed(2)} for ${h.customer.name} ? `,retry:`Retry the failed payment of $${h.amount.toFixed(2)} for ${h.customer.name} ? `,refund:`Proceed with a refund of $${h.amount.toFixed(2)} to ${h.customer.name}?`};ie({open:!0,title:A[u],variant:u==="refund"?"warning":"info",description:j[u],onConfirm:async()=>{try{u==="charge"&&await Br(h.id),u==="precharge"&&await Hr(h.id),u==="retry"&&await qr(h.id),u==="refund"&&await _r(h.id),L.success("Action processed"),Re.invalidateQueries({queryKey:E.payments.listCharges.queryKey()}),Re.invalidateQueries({queryKey:E.payments.listHolds.queryKey()})}catch(R){L.error(R.message||"Action failed")}}})};return n.jsx(Dr,{title:"Bookings",subtitle:"Calendar and charges.",actions:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-white p-1 text-sm",children:["month","week","day"].map(u=>n.jsx("button",{onClick:()=>N(u),className:`rounded-lg px-3 py-1.5 font-semibold ${C===u?"bg-[#163022] text-white":"text-gray-700"}`,children:u.charAt(0).toUpperCase()+u.slice(1)},u))}),n.jsxs("button",{onClick:()=>Ce(!se),className:`flex items-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold shadow transition-all ${se?"bg-primary text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:[se?n.jsx(Qr,{className:"w-4 h-4"}):n.jsx(Zr,{className:"w-4 h-4"}),"Live Status"]}),n.jsx("button",{onClick:()=>S(!0),className:"rounded-xl bg-[#163022] px-4 py-2 text-sm font-semibold text-white shadow hover:bg-[#0f241a]",children:"New Booking"})]}),children:n.jsxs("div",{className:"relative flex flex-col gap-6 lg:flex-row h-full",children:[n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-700",children:"Providers"}),n.jsxs("select",{value:i,onChange:u=>o(u.target.value),className:"rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm",children:[n.jsx("option",{value:"ALL",children:"All"}),Nr.map(u=>n.jsx("option",{value:u,children:u},u))]})]}),n.jsx("input",{value:y,onChange:u=>x(u.target.value),placeholder:"Search bookings",className:"rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm"})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[n.jsxs("div",{className:"lg:col-span-2 rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("div",{className:"mb-3 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold text-[#0f172a]",children:"Calendar"}),n.jsxs("div",{className:"text-xs text-gray-500 capitalize",children:[C," view"]})]})}),C==="month"&&n.jsxs("div",{className:"grid grid-cols-7 gap-2 text-sm",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(u=>n.jsx("div",{className:"text-center text-xs font-semibold text-gray-500",children:u},u)),Cr.map(u=>{const h=u.toISOString().slice(0,10),A=Et.filter(j=>j.scheduledDate===h);return n.jsxs("div",{onDragOver:j=>j.preventDefault(),onDrop:j=>{const R=j.dataTransfer.getData("text/plain");R&&$t(R,h)},className:`min-h-[120px] rounded-xl border ${T===h?"border-[#163022]":"border-gray-200"} bg-[#f9fafb] p-2`,children:[n.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-gray-700",children:[n.jsx("span",{children:u.getDate()}),n.jsx("button",{className:"text-[10px] text-gray-500 hover:text-[#163022]",onClick:()=>P(h),children:"Select"})]}),n.jsx("div",{className:"mt-1 space-y-2",children:A.map(j=>n.jsxs("button",{draggable:!0,onDragStart:R=>zt(R,j.id),onClick:()=>c(j),className:"block w-full rounded-lg border border-gray-200 bg-white px-2 py-1 text-left text-xs shadow hover:border-[#163022]",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold text-gray-800",children:j.scheduledTime}),n.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:j.providerColor}})]}),n.jsx("div",{className:"truncate text-gray-700",children:j.customer})]},j.id))})]},u.toISOString())})]}),C!=="month"&&n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"min-w-[980px]",children:n.jsxs("div",{className:"grid grid-cols-[80px,1fr] gap-2",children:[n.jsx("div",{className:"text-[11px] text-gray-500",children:Vt().map(u=>n.jsx("div",{className:"h-10 border-b border-dashed border-gray-200 pr-2 text-right leading-10",children:u},u))}),n.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${C==="week"?7:1}, minmax(0, 1fr))`},children:(C==="week"?fa():pa()).map(u=>{const h=u.toISOString().slice(0,10),A=Et.filter(j=>j.scheduledDate===h);return n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-[#f9fafb] p-2",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs font-semibold text-gray-700",children:[n.jsx("span",{children:u.toDateString()}),n.jsx("button",{className:"text-[10px] text-gray-500 hover:text-[#163022]",onClick:()=>P(h),children:"Select"})]}),n.jsxs("div",{className:"relative h-[920px]",children:[A.map(j=>{const R=ha(j.scheduledTime),Be=Math.max(50,(j.durationHours||1)*60);return n.jsxs("div",{draggable:!0,onDragStart:q=>zt(q,j.id),onClick:()=>c(j),className:"absolute left-1 right-1 rounded-lg border border-gray-200 bg-white p-2 shadow hover:border-[#163022]",style:{top:R,height:Be},children:[n.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[n.jsxs("span",{className:"font-semibold text-gray-800",children:[j.scheduledTime," • ",bt(j.durationHours||1),j.cleaners?.length&&j.cleaners.length>1?` (≈ ${bt((j.durationHours||1)/j.cleaners.length)} each)`:""]}),n.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:j.providerColor}})]}),n.jsx("div",{className:"text-sm font-semibold text-[#0f172a]",children:j.customer}),n.jsxs("div",{className:"text-[11px] text-gray-500",children:[j.serviceType," • ",j.location]}),j.cleaners&&j.cleaners.length>0&&n.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:j.cleaners.map(q=>n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{backgroundColor:`${q.color} 20`,color:q.color},children:[n.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:q.color}}),q.name]},q.name))})]},j.id)}),n.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Vt().map((j,R)=>n.jsx("div",{className:"absolute left-0 right-0 border-b border-dashed border-gray-200",style:{top:R*40+40}},j))})]})]},h)})})]})})})]}),n.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold text-[#0f172a]",children:"Charges"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Payments & holds"})]})}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:[["pending","Pending Charges"],["holds","Card Hold(s)"],["declined","Declined"],["all","All Charges"]].map(([u,h])=>n.jsx("button",{onClick:()=>f(u),className:`rounded-lg px-3 py-1.5 text-xs font-semibold ${m===u?"bg-[#163022] text-white":"bg-[#f5f3ec] text-gray-700"}`,children:h},u))}),n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[n.jsx("input",{type:"date",value:g,onChange:u=>v(u.target.value),className:"rounded-lg border border-gray-200 px-2 py-1"}),n.jsx("input",{type:"date",value:k,onChange:u=>$(u.target.value),className:"rounded-lg border border-gray-200 px-2 py-1"}),n.jsx("input",{value:p,onChange:u=>b(u.target.value),placeholder:"Search name/email/phone/address",className:"flex-1 rounded-lg border border-gray-200 px-2 py-1"})]}),n.jsx("div",{className:"max-h-[560px] overflow-y-auto",children:n.jsxs("table",{className:"min-w-full text-left text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-white text-[11px] text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2",children:"Service"}),n.jsx("th",{className:"px-2 py-2",children:"Customer"}),n.jsx("th",{className:"px-2 py-2",children:"Booking"}),n.jsx("th",{className:"px-2 py-2",children:"Cleaner"}),n.jsx("th",{className:"px-2 py-2",children:"Location"}),n.jsx("th",{className:"px-2 py-2 text-right",children:"Amount"}),n.jsx("th",{className:"px-2 py-2 text-right",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:kr.map(u=>n.jsxs("tr",{className:"hover:bg-[#f9fafb]",children:[n.jsxs("td",{className:"px-2 py-2",children:[n.jsx("div",{children:u.serviceDate}),n.jsx("div",{className:"text-[11px] text-gray-500",children:u.serviceTime})]}),n.jsxs("td",{className:"px-2 py-2",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:u.customer.name}),n.jsx("div",{className:"text-[11px] text-gray-500",children:u.customer.email}),n.jsx("div",{className:"text-[11px] text-gray-500",children:u.customer.phone})]}),n.jsx("td",{className:"px-2 py-2 text-gray-700",children:u.bookingId}),n.jsx("td",{className:"px-2 py-2 text-gray-700",children:u.cleaner}),n.jsx("td",{className:"px-2 py-2 text-gray-700",children:u.location}),n.jsxs("td",{className:"px-2 py-2 text-right font-semibold text-gray-800",children:["$",u.amount.toFixed(2)]}),n.jsx("td",{className:"px-2 py-2 text-right",children:n.jsx(ba,{row:u,onAction:Er})})]},u.id))})]})})]})]})]}),n.jsx(ga,{booking:l,onClose:()=>c(null),onMove:$t,onAction:u=>{if(l){if(u==="assign"){le(!0);return}if(u==="cancel"){Z(!0);return}xa(u,l,{cancel:X,receipt:fe,invoice:D,setupIntent:z,capture:ne,refund:M},G,ie)}},actionPrefs:G,setActionPrefs:pe,mutations:{cancel:X,receipt:fe,invoice:D,setupIntent:z,capture:ne,refund:M},setActionModal:ie}),n.jsx(ma,{isOpen:Se,onClose:()=>le(!1),bookingId:l?Number(l.id):null,currentCleanerIds:l?.cleanerIds||[]}),n.jsx(nn,{isOpen:ae,onClose:()=>Z(!1),booking:l?{id:l.id,customerName:l.customer,price:l.price,date:l.scheduledDate,time:l.scheduledTime}:null,onConfirm:async u=>{l&&(await X.mutateAsync({bookingId:Number(l.id),status:"CANCELLED",scope:u.scope,cancellationFeeApplied:u.applyFee,cancellationFeeAmount:u.feeAmount,notifyEmail:u.notifyEmail,notifySms:u.notifySms}),L.success("Booking cancelled successfully"),Re.invalidateQueries(E.getAllBookingsAdmin.queryOptions({},{enabled:!0}).queryKey),c(null))}}),n.jsx(sn,{isOpen:ke,onClose:()=>W(!1),booking:H?{...H,customerName:t.find(u=>u.id===H.id)?.customer||"Client",isRecurring:H.isRecurring}:null,onConfirm:async u=>{H&&await Sr(H.id,H.date,u)}}),n.jsx(an,{isOpen:he.open,onClose:()=>ie(u=>({...u,open:!1})),title:he.title,description:he.description,variant:he.variant,onConfirm:he.onConfirm}),n.jsx(da,{isOpen:$e,onClose:()=>S(!1)})]}),se&&n.jsx("div",{className:"w-full lg:w-80 flex-shrink-0 animate-in slide-in-from-right duration-300",children:n.jsx(ua,{})}),n.jsx("div",{className:"w-full lg:w-72 flex-shrink-0",children:n.jsx(ya,{bookings:t.filter(u=>u.status==="PENDING"),onSelect:u=>c(u)})})]})})};export{La as component};
