import{j as e,u as m,a as p,k as x,d as h,z as c}from"./index-D68JyPnQ.js";import{u as g}from"./BookingWizardProvider-CZ44CSfS.js";import{b}from"./analytics-Cg1IkZOG.js";import{i as f,b as y}from"./styles-CoJu3Vce.js";import{Q as j}from"./QuizIdentityLayout-_IpR82wO.js";function w(){const n=m(),l=p(),{draft:o,updateDraft:u}=g(),[r,i]=x.useState(null),s=h(l.booking.sendQuizOtp.mutationOptions()),a=()=>{const t=o.contact.phone||"";if(!t.trim()){i("Please enter your phone number");return}b.selectionMade("returning-phone",t),s.mutate({phone:t},{onSuccess:()=>{c.success("Verification code sent"),n({to:"/booking-quiz/returning/otp"})},onError:d=>c.error(d.message||"Failed to send code")})};return e.jsx(j,{title:"Welcome back",subtitle:"Sign in with your phone number to manage your bespoke cleans.",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-[#163022] uppercase tracking-wider",children:"Phone Number"}),e.jsx("input",{className:`${f} mt-2 py-4 text-lg border-2 focus:border-[#163022] transition-colors`,value:o.contact.phone||"",onChange:t=>{u({contact:{...o.contact,phone:t.target.value}}),i(null)},placeholder:"(555) 123-4567",onKeyDown:t=>t.key==="Enter"&&a(),autoFocus:!0,inputMode:"tel"}),r&&e.jsxs("p",{className:"mt-2 text-sm font-medium text-red-600 flex items-center gap-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),r]})]}),e.jsx("button",{type:"button",className:`${y} w-full py-4 text-lg shadow-xl active:scale-[0.98] disabled:opacity-70`,onClick:a,disabled:s.isPending,children:s.isPending?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Continue to Sign In"}),e.jsxs("p",{className:"text-center text-xs text-[#5c5a55]",children:["New customer? ",e.jsx("button",{type:"button",onClick:()=>n({to:"/booking-quiz/new/full-name"}),className:"font-bold underline",children:"Start here"})]})]})})}const z=function(){return e.jsx(w,{})};export{z as component};
