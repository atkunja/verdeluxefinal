import{u,b as g,a as x,f as p,r as h,g as b,d as y,z as i,j as e}from"./index-D68JyPnQ.js";import{P as f}from"./PortalLayout-DFkXF_dG.js";import"./Footer-CWCGcQgO.js";import"./map-pin-BUW29wY0.js";import"./calendar-sVqVbs5g.js";const P=function(){const l=u(),{token:a,user:t}=g(),r=x(),n=p();h.useEffect(()=>{(!a||!t||t.role!=="ADMIN"&&t.role!=="OWNER")&&l({to:"/login"})},[a,t,l]);const o=b(r.payments.getBillingConfig.queryOptions(void 0,{enabled:!!a})),d=y(r.payments.setBillingConfig.mutationOptions({onSuccess:()=>{i.success("Billing configuration saved"),n.invalidateQueries({queryKey:r.payments.getBillingConfig.queryKey()})},onError:s=>i.error(s.message||"Failed to save")})),c=s=>{d.mutate({holdDelayHours:s})};return e.jsx(f,{portalType:"admin",children:e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-emerald-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Billing Configuration"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Configure payment hold timing and billing settings."})]})}),e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold",children:"About Payment Hold Timing"}),e.jsx("p",{className:"mt-1",children:"By default, payment holds are placed immediately when a booking is created. Configure a delay so holds are only placed within a specified number of hours before the scheduled time."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Payment Hold Timing"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Payment Hold Delay (hours)"}),e.jsx("input",{type:"number",placeholder:"e.g., 48",defaultValue:o.data?.holdDelayHours??"",className:"w-full max-w-sm border border-[#d7d1c4] bg-[#f7f4ed] text-[#163022] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent placeholder:text-gray-500",onBlur:s=>{const m=s.target.value?Number(s.target.value):null;s.target.value&&Number.isNaN(Number(s.target.value))||c(m)}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to place payment holds immediately (default behavior)."})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-sm text-green-800",children:[e.jsx("p",{className:"font-semibold",children:"Current Behavior"}),e.jsx("p",{className:"mt-1",children:"Payment holds will be placed automatically when a booking reaches the configured window."})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-sm text-amber-800",children:[e.jsx("p",{className:"font-semibold",children:"Important Notes"}),e.jsxs("ul",{className:"list-disc list-inside",children:[e.jsx("li",{children:"This setting applies to new and updated bookings with saved payment methods."}),e.jsx("li",{children:"Existing bookings with holds already placed will not be affected."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"px-4 py-2 rounded-lg border border-[#d7d1c4] text-[#163022] bg-[#f7f4ed] hover:bg-[#edeae1] transition",children:"Reset"}),e.jsx("button",{className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary-dark transition",children:"Save Configuration"})]})]})]})]})})};export{P as component};
